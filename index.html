<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН & роЖро╡рогроЩрпНроХро│рпН</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #4F46E5; --primary-dark: #4338CA; --secondary: #D97706; --secondary-dark: #B45309;
            --success: #059669; --danger: #DC2626; --light: #F3F4F6; --dark: #1F2937; --gray: #6B7280;
            --purple: #8E44AD; --purple-dark: #6C3483; --blue: #3498DB; --blue-dark: #2980B9;
            --email: #E74C3C; --email-dark: #C0392B; --teal: #0D9488; --teal-dark: #0F766E;
        }
        body {
            font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%);
            min-height: 100vh; padding: 20px; color: var(--dark);
        }
        .container {
            max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white; padding: 25px 30px; text-align: center; position: relative;
        }
        .logo-container { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 15px; }
        .logo {
            width: 60px; height: 60px; background: white; border-radius: 50%; display: flex;
            align-items: center; justify-content: center; font-size: 30px; font-weight: bold;
            color: var(--primary); box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .header-text h1 { font-size: 26px; margin-bottom: 8px; }
        .header-text p { font-size: 16px; opacity: 0.9; }
        .contact-info { display: flex; justify-content: center; gap: 20px; margin-top: 15px; flex-wrap: wrap; }
        .contact-item {
            display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.1);
            padding: 8px 15px; border-radius: 50px; backdrop-filter: blur(10px); font-size: 14px;
        }
        .main-content { padding: 30px; }
        .service-selection-section { margin-bottom: 30px; }
        .section-title {
            color: var(--primary); font-size: 24px; margin-bottom: 20px; padding-bottom: 10px;
            border-bottom: 3px solid var(--primary); display: flex; align-items: center; justify-content: space-between;
        }
        .section-title i { font-size: 20px; }
        .title-actions { display: flex; gap: 8px; }
        .title-btn {
            background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 6px;
            cursor: pointer; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 5px;
        }
        .title-btn:hover { background: var(--primary-dark); }
        .service-buttons-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px; margin-bottom: 25px;
        }
        .service-btn {
            background: white; border: 2px solid #E5E7EB; border-radius: 10px; padding: 20px; text-align: center;
            cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center;
            gap: 10px; position: relative;
        }
        .service-btn:hover { border-color: var(--primary); transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .service-btn.active { border-color: var(--primary); background: #F0F9FF; }
        .service-btn.custom-service { border-color: var(--success); border-style: dashed; }
        .service-icon { font-size: 30px; color: var(--primary); margin-bottom: 5px; }
        .service-btn-name { font-size: 16px; font-weight: 600; color: var(--dark); text-align: center; }
        .service-btn-price { font-size: 18px; font-weight: bold; color: var(--success); }
        .service-btn-category {
            font-size: 12px; color: var(--gray); background: #F3F4F6; padding: 3px 10px; border-radius: 10px;
        }
        .delete-service-btn {
            position: absolute; top: 8px; right: 8px; background: var(--danger); color: white; border: none;
            width: 22px; height: 22px; border-radius: 50%; cursor: pointer; display: none; align-items: center;
            justify-content: center; font-size: 12px;
        }
        .service-btn:hover .delete-service-btn { display: flex; }
        .quick-search { margin-top: 20px; display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .search-box { position: relative; flex: 1; max-width: 400px; }
        .search-input {
            width: 100%; padding: 12px 45px 12px 15px; border: 2px solid #E5E7EB; border-radius: 50px;
            font-size: 15px; background: white;
        }
        .search-input:focus { outline: none; border-color: var(--primary); }
        .search-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--gray); font-size: 16px; }
        .category-filter { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
        .filter-btn {
            padding: 8px 15px; background: #F3F4F6; border: 2px solid #E5E7EB; border-radius: 20px; cursor: pointer;
            font-size: 13px; font-weight: 500; transition: all 0.3s;
        }
        .filter-btn:hover { border-color: var(--primary); background: #E0E7FF; }
        .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        .service-info-section { margin-bottom: 30px; }
        .service-card {
            background: white; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); padding: 25px;
            margin-bottom: 25px; border: 2px solid #E5E7EB; transition: all 0.3s ease;
        }
        .service-card:hover { border-color: var(--primary); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .service-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
        .service-name-container { flex: 1; }
        .service-name { font-size: 24px; font-weight: bold; color: var(--dark); margin-bottom: 8px; }
        .service-category {
            display: inline-block; background: #E0E7FF; color: var(--primary); padding: 5px 15px;
            border-radius: 20px; font-size: 14px; font-weight: 600;
        }
        .service-price-container { text-align: right; }
        .service-price-label { font-size: 14px; color: var(--gray); margin-bottom: 5px; }
        .service-price { font-size: 32px; font-weight: bold; color: var(--success); }
        .service-description {
            margin: 20px 0; padding: 18px; background: #F9FAFB; border-radius: 10px; border-left: 4px solid var(--secondary);
        }
        .description-label { font-weight: 600; color: var(--dark); margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        .description-text { color: var(--gray); line-height: 1.6; font-size: 15px; }
        .documents-section { margin-top: 25px; }
        .documents-list { list-style: none; padding-left: 0; }
        .document-item {
            display: flex; align-items: center; gap: 12px; padding: 12px; background: #F9FAFB; border-radius: 8px;
            margin-bottom: 10px; border-left: 4px solid var(--primary); transition: all 0.3s;
        }
        .document-item:hover { background: #F3F4F6; transform: translateX(5px); }
        .document-item i { color: var(--success); font-size: 16px; }
        .edit-doc-btn {
            background: transparent; border: none; color: var(--primary); cursor: pointer; padding: 5px;
            border-radius: 4px; transition: all 0.3s;
        }
        .edit-doc-btn:hover { background: var(--primary); color: white; }
        .add-document-btn {
            background: var(--secondary); color: white; border: none; padding: 10px 20px; border-radius: 8px;
            cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px; font-size: 14px;
        }
        .add-document-btn:hover { background: var(--secondary-dark); }
        
        /* WhatsApp Section */
        .whatsapp-section {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); border-radius: 12px; padding: 25px;
            color: white; margin-top: 30px;
        }
        .whatsapp-header { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; }
        .whatsapp-header i { font-size: 32px; }
        .whatsapp-header h3 { font-size: 22px; font-weight: bold; }
        .whatsapp-message-box {
            background: rgba(255,255,255,0.1); border-radius: 10px; padding: 18px; margin: 18px 0; backdrop-filter: blur(10px);
        }
        .message-preview {
            font-family: 'Arial', sans-serif; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;
            margin: 15px 0; white-space: pre-wrap; line-height: 1.6; max-height: 250px; overflow-y: auto; font-size: 14px;
        }
        .customer-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        .input-group { display: flex; flex-direction: column; }
        .input-label { font-weight: 600; margin-bottom: 6px; font-size: 13px; }
        .input-field {
            padding: 10px; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px;
            background: rgba(255,255,255,0.1); color: white; font-size: 15px;
        }
        .input-field::placeholder { color: rgba(255,255,255,0.7); }
        .input-field:focus { outline: none; border-color: white; }
        .whatsapp-btn {
            background: white; color: #25D366; border: none; padding: 14px 28px; border-radius: 10px;
            font-size: 16px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 10px;
            margin: 18px auto 0; transition: all 0.3s; width: 100%; justify-content: center;
        }
        .whatsapp-btn:hover { transform: scale(1.02); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .whatsapp-test-btn {
            background: rgba(255,255,255,0.2); color: white; border: 1px solid white; padding: 8px 15px;
            border-radius: 6px; font-size: 13px; cursor: pointer; margin-top: 10px; display: flex; align-items: center; gap: 5px;
        }
        .whatsapp-test-btn:hover { background: rgba(255,255,255,0.3); }
        
        /* Email Section */
        .email-section {
            background: linear-gradient(135deg, var(--email) 0%, var(--email-dark) 100%); 
            border-radius: 12px; padding: 25px; color: white; margin-top: 30px;
        }
        .email-header { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; }
        .email-header i { font-size: 32px; }
        .email-header h3 { font-size: 22px; font-weight: bold; }
        .email-message-box {
            background: rgba(255,255,255,0.1); border-radius: 10px; padding: 18px; margin: 18px 0; 
            backdrop-filter: blur(10px);
        }
        .email-btn {
            background: white; color: var(--email); border: none; padding: 14px 28px; border-radius: 10px;
            font-size: 16px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 10px;
            margin: 18px auto 0; transition: all 0.3s; width: 100%; justify-content: center;
        }
        .email-btn:hover { transform: scale(1.02); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .email-test-btn {
            background: rgba(255,255,255,0.2); color: white; border: 1px solid white; padding: 8px 15px;
            border-radius: 6px; font-size: 13px; cursor: pointer; margin-top: 10px; display: flex; align-items: center; gap: 5px;
        }
        .email-test-btn:hover { background: rgba(255,255,255,0.3); }
        .email-options {
            display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;
        }
        .email-option-btn {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 8px;
            padding: 10px 15px; color: white; cursor: pointer; font-size: 13px; display: flex; align-items: center; gap: 5px;
        }
        .email-option-btn:hover { background: rgba(255,255,255,0.2); }
        .email-option-btn.active { background: rgba(255,255,255,0.3); border-color: white; }
        
        .action-buttons {
            display: flex; gap: 12px; justify-content: center; margin-top: 25px; padding: 20px; border-top: 1px solid #E5E7EB;
        }
        .action-btn {
            padding: 12px 22px; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer;
            display: flex; align-items: center; gap: 8px; transition: all 0.3s;
        }
        .btn-print { background: var(--primary); color: white; }
        .btn-print:hover { background: var(--primary-dark); }
        .btn-save { background: var(--success); color: white; }
        .btn-save:hover { background: #047857; }
        .btn-clear { background: var(--danger); color: white; }
        .btn-clear:hover { background: #B91C1C; }
        .btn-reset { background: var(--secondary); color: white; }
        .btn-reset:hover { background: var(--secondary-dark); }
        .customize-btn {
            background: var(--primary); color: white; border: none; padding: 10px 15px; border-radius: 8px;
            cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: all 0.3s; font-size: 14px;
        }
        .customize-btn:hover { background: var(--primary-dark); transform: translateY(-2px); }
        .footer { text-align: center; padding: 20px; background: var(--dark); color: white; margin-top: 30px; }
        .footer p { margin: 5px 0; font-size: 14px; }
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white; border-radius: 12px; padding: 25px; max-width: 500px; width: 90%;
            max-height: 80vh; overflow-y: auto;
        }
        .modal-header { font-size: 20px; font-weight: bold; color: var(--dark); margin-bottom: 15px; padding-bottom: 12px; border-bottom: 2px solid var(--primary); }
        .modal-input { width: 100%; padding: 10px; border: 2px solid #E5E7EB; border-radius: 8px; font-size: 15px; margin-bottom: 12px; }
        .modal-input:focus { outline: none; border-color: var(--primary); }
        .modal-textarea { width: 100%; padding: 10px; border: 2px solid #E5E7EB; border-radius: 8px; font-size: 15px; margin-bottom: 12px; min-height: 80px; resize: vertical; font-family: 'Arial', sans-serif; }
        .modal-buttons { display: flex; gap: 10px; margin-top: 15px; }
        .btn-add { flex: 1; padding: 10px; background: var(--success); color: white; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; }
        .btn-add:hover { background: #047857; }
        .btn-cancel { flex: 1; padding: 10px; background: var(--gray); color: white; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; }
        .btn-cancel:hover { background: #4B5563; }
        .service-counter { text-align: center; margin: 15px 0; color: var(--gray); font-size: 13px; }
        .service-counter span { font-weight: bold; color: var(--primary); }
        .new-service-btn {
            background: linear-gradient(135deg, var(--success) 0%, #047857 100%); color: white; border: 2px dashed white;
            border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;
            display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; min-height: 140px;
        }
        .new-service-btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .new-service-icon { font-size: 40px; margin-bottom: 8px; }
        .new-service-text { font-size: 16px; font-weight: 600; }
        .status-options {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-top: 15px; margin-bottom: 15px;
        }
        .status-option-btn {
            background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 8px;
            padding: 10px; color: white; cursor: pointer; text-align: center; transition: all 0.3s;
        }
        .status-option-btn:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }
        .status-option-btn.active { background: rgba(255, 255, 255, 0.3); border-color: white; }
        .attachment-section {
            margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px;
        }
        .attachment-list { margin-top: 10px; }
        .attachment-item {
            display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.1);
            padding: 10px; border-radius: 6px; margin-bottom: 8px;
        }
        .attachment-info { display: flex; align-items: center; gap: 10px; }
        .attachment-name { font-weight: 500; }
        .attachment-actions { display: flex; gap: 5px; }
        .attachment-btn {
            background: rgba(255,255,255,0.2); border: none; color: white; padding: 5px 10px; border-radius: 4px;
            cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 3px;
        }
        .attachment-btn:hover { background: rgba(255,255,255,0.3); }
        .upload-area {
            border: 2px dashed rgba(255,255,255,0.3); border-radius: 8px; padding: 20px; text-align: center;
            margin-top: 10px; cursor: pointer; transition: all 0.3s;
        }
        .upload-area:hover { border-color: white; background: rgba(255,255,255,0.05); }
        .upload-area i { font-size: 24px; margin-bottom: 10px; }
        .upload-area p { font-size: 14px; margin-bottom: 5px; }
        .file-input { display: none; }
        .cloud-storage-options {
            display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;
        }
        .cloud-btn {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px;
            padding: 8px 12px; color: white; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 5px;
        }
        .cloud-btn:hover { background: rgba(255,255,255,0.2); }
        @media (max-width: 768px) {
            .header { padding: 20px; }
            .logo-container { flex-direction: column; text-align: center; }
            .service-header { flex-direction: column; text-align: center; }
            .service-price-container { text-align: center; }
            .customer-inputs { grid-template-columns: 1fr; }
            .contact-info { flex-direction: column; align-items: center; gap: 10px; }
            .action-buttons { flex-direction: column; }
            .main-content { padding: 20px; }
            .service-price { font-size: 28px; }
            .service-name { font-size: 22px; }
            .section-title { font-size: 20px; flex-direction: column; align-items: flex-start; gap: 10px; }
            .service-buttons-grid { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
            .quick-search { flex-direction: column; align-items: stretch; }
            .search-box { max-width: 100%; }
            .whatsapp-btn, .email-btn { padding: 12px 20px; font-size: 15px; }
            .status-options { grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); }
            .cloud-storage-options, .email-options { flex-direction: column; }
        }
        @media (max-width: 480px) {
            .header-text h1 { font-size: 22px; }
            .header-text p { font-size: 14px; }
            .action-btn { padding: 10px 18px; font-size: 14px; }
            .service-buttons-grid { grid-template-columns: 1fr; }
            .modal-content { padding: 20px; }
            .status-options { grid-template-columns: 1fr; }
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .service-card { animation: fadeIn 0.5s ease-out; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-dark); }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <div class="logo">D</div>
                <div class="header-text">
                    <h1>родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН</h1>
                    <p>Thoothukudi-1 - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН & родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН</p>
                </div>
            </div>
            <div class="contact-info">
                <div class="contact-item"><i class="fas fa-phone"></i><span>88 70 23 23 32</span></div>
                <div class="contact-item"><i class="fas fa-phone"></i><span>98 43 23 23 24</span></div>
                <div class="contact-item"><i class="fab fa-whatsapp"></i><span>WhatsApp: 9843232324</span></div>
                <div class="contact-item"><i class="fas fa-envelope"></i><span>Email: dhasscsc@gmail.com</span></div>
            </div>
        </div>
        <div class="main-content">
            <div class="service-selection-section">
                <h2 class="section-title">
                    <div><i class="fas fa-list"></i> роЪрпЗро╡рпИроХро│рпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</div>
                    <div class="title-actions">
                        <button class="title-btn" onclick="openAddServiceModal()"><i class="fas fa-plus"></i> рокрпБродро┐роп роЪрпЗро╡рпИ</button>
                        <button class="title-btn" onclick="openEditServiceModal()" style="background: var(--secondary);"><i class="fas fa-edit"></i> роЪрпЗро╡рпИ родро┐ро░рпБродрпНродрпБ</button>
                    </div>
                </h2>
                <div class="service-counter">
                    роорпКродрпНрод роЪрпЗро╡рпИроХро│рпН: <span id="totalServicesCount">0</span> | 
                    рокропройро░рпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯро╡рпИ: <span id="customServicesCount">0</span> | 
                    ро░рпЖроЯро┐роорпЗроЯрпН роЪрпЗро╡рпИроХро│рпН: <span id="predefinedServicesCount">10</span>
                </div>
                <div class="quick-search">
                    <div class="search-box">
                        <input type="text" class="search-input" id="serviceSearch" placeholder="ЁЯФН роЪрпЗро╡рпИропрпИ родрпЗроЯро╡рпБроорпН...">
                        <div class="search-icon"><i class="fas fa-search"></i></div>
                    </div>
                    <div class="category-filter">
                        <button class="filter-btn active" onclick="filterServices('all')">роЕройрпИродрпНродрпБроорпН</button>
                        <button class="filter-btn" onclick="filterServices('род роЕро░роЪрпБ роЪрпЗро╡рпИ')">род роЕро░роЪрпБ роЪрпЗро╡рпИ</button>
                        <button class="filter-btn" onclick="filterServices('роо роЕро░роЪрпБ роЪрпЗро╡рпИ')">роо роЕро░роЪрпБ роЪрпЗро╡рпИ</button>
                        <button class="filter-btn" onclick="filterServices('роЗ роЪрпЗро╡рпИ')">роЗ роЪрпЗро╡рпИ</button>
                        <button class="filter-btn" onclick="filterServices('рокрпКродрпБ роЪрпЗро╡рпИ')">рокрпКродрпБ роЪрпЗро╡рпИ</button>
                        <button class="filter-btn" onclick="filterServices('роЗродро░ роЪрпЗро╡рпИ')">роЗродро░ роЪрпЗро╡рпИ</button>
                        <button class="filter-btn" onclick="filterServices('роЪро┐ро▒рокрпНрокрпБ роЪрпЗро╡рпИроХро│рпН')">роЪро┐ро▒рокрпНрокрпБ роЪрпЗро╡рпИроХро│рпН</button>
                        <button class="filter-btn" onclick="filterServices('custom')">роОройродрпБ роЪрпЗро╡рпИроХро│рпН</button>
                    </div>
                </div>
                <div class="service-buttons-grid" id="serviceButtonsGrid"></div>
                <div class="service-buttons-grid">
                    <div class="new-service-btn" onclick="openAddServiceModal()">
                        <div class="new-service-icon"><i class="fas fa-plus-circle"></i></div>
                        <div class="new-service-text">+ рокрпБродро┐роп роЪрпЗро╡рпИ роЪрпЗро░рпНроХрпНроХ</div>
                        <div style="font-size: 13px; opacity: 0.8;">роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН</div>
                    </div>
                </div>
            </div>
            <div class="service-info-section">
                <h2 class="section-title"><i class="fas fa-info-circle"></i> роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН</h2>
                <div class="service-card">
                    <div class="service-header">
                        <div class="service-name-container">
                            <div class="service-name" id="serviceNameDisplay">роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</div>
                            <div class="service-category" id="serviceCategoryDisplay">роЪрпЗро╡рпИ ро╡роХрпИ</div>
                        </div>
                        <div class="service-price-container">
                            <div class="service-price-label">роЪрпЗро╡рпИ роХроЯрпНроЯрогроорпН</div>
                            <div class="service-price" id="servicePriceDisplay">тВ╣0.00</div>
                        </div>
                    </div>
                    <div class="service-description">
                        <div class="description-label"><i class="fas fa-file-alt"></i> роЪрпЗро╡рпИ ро╡ро┐ро│роХрпНроХроорпН</div>
                        <div class="description-text" id="serviceDescriptionDisplay">роорпЗро▓рпЗ роЙро│рпНро│ рокроЯрпНроЯройрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</div>
                    </div>
                    <div class="documents-section">
                        <label class="description-label"><i class="fas fa-file-alt"></i> родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН</label>
                        <ul class="documents-list" id="documentsList">
                            <li class="document-item"><i class="fas fa-check-circle"></i><span>роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</span></li>
                        </ul>
                        <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                            <button type="button" class="add-document-btn" onclick="openAddDocumentModal()"><i class="fas fa-plus"></i> рокрпБродро┐роп роЖро╡рогроорпН</button>
                            <button type="button" class="customize-btn" onclick="openEditDocumentModal()"><i class="fas fa-edit"></i> роЖро╡рогроЩрпНроХро│рпН родро┐ро░рпБродрпНродрпБ</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- WhatsApp Message with Attachments Section -->
            <div class="whatsapp-section">
                <div class="whatsapp-header">
                    <i class="fab fa-whatsapp"></i>
                    <h3>ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпБроХрпНроХрпБ ро╡ро╛роЯрпНроЪрокрпНрокро┐ро▓рпН роЕройрпБрокрпНрокрпБроХ</h3>
                </div>
                <div class="whatsapp-message-box">
                    <div class="customer-inputs">
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН *</label>
                            <input type="text" id="customerName" class="input-field" placeholder="ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН">
                        </div>
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпН *</label>
                            <input type="tel" id="customerPhone" class="input-field" placeholder="9843232324">
                        </div>
                    </div>
                    
                    <!-- роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпН рокроХрпБродро┐ -->
                    <div class="attachment-section">
                        <label class="input-label"><i class="fas fa-paperclip"></i> роЖро╡рогроЩрпНроХро│рпИ роЗрогрпИроХрпНроХро╡рпБроорпН (ро╡ро┐ро░рпБрокрпНрокродрпНродрпЗро░рпНро╡рпБ)</label>
                        <div class="attachment-list" id="attachmentList"></div>
                        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>роЖро╡рогроЩрпНроХро│рпИ роЗроЩрпНроХрпЗ роЗро┤рпБродрпНродрпБ ро╡ро┐роЯро╡рпБроорпН роЕро▓рпНро▓родрпБ роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН</p>
                            <p style="font-size: 12px; opacity: 0.8;">PDF, Word, Excel, Image, Text files (роЕродро┐роХрокроЯрпНроЪроорпН 5MB)</p>
                            <input type="file" id="fileInput" class="file-input" multiple onchange="handleFileUpload(event)">
                        </div>
                        <div style="margin-top: 10px;">
                            <label class="input-label">роХрпНро│ро╡рпБроЯрпН ро╕рпНроЯрпЛро░рпЗроЬрпН роЗрогрпИрокрпНрокрпБроХро│рпН:</label>
                            <div class="cloud-storage-options">
                                <button class="cloud-btn" onclick="addCloudLink('google-drive')"><i class="fab fa-google-drive"></i> Google Drive</button>
                                <button class="cloud-btn" onclick="addCloudLink('dropbox')"><i class="fab fa-dropbox"></i> Dropbox</button>
                                <button class="cloud-btn" onclick="addCloudLink('onedrive')"><i class="fab fa-microsoft"></i> OneDrive</button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="whatsapp-test-btn" onclick="testWhatsAppMessage()"><i class="fas fa-vial"></i> WhatsApp роЪрпЖропрпНродро┐ роЪрпЛродройрпИ</button>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:</label>
                        <div class="message-preview" id="messagePreview">ро╡рогроХрпНроХроорпН!

родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▒рпНроХрпБ роиро▓рпНро╡ро░ро╡рпБ!

роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН...</div>
                    </div>
                    <button type="button" class="whatsapp-btn" onclick="sendWhatsAppMessage()"><i class="fab fa-whatsapp"></i> ро╡ро╛роЯрпНроЪрокрпНрокро┐ро▓рпН роЕройрпБрокрпНрокрпБ</button>
                </div>
            </div>
            
            <!-- Email Section -->
            <div class="email-section">
                <div class="email-header">
                    <i class="fas fa-envelope"></i>
                    <h3>ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпБроХрпНроХрпБ роИроорпЖропро┐ро▓ро┐ро▓рпН роЕройрпБрокрпНрокрпБроХ</h3>
                </div>
                <div class="email-message-box">
                    <div class="customer-inputs">
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН *</label>
                            <input type="text" id="emailCustomerName" class="input-field" placeholder="ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН">
                        </div>
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН роИроорпЖропро┐ро▓рпН *</label>
                            <input type="email" id="emailCustomerEmail" class="input-field" placeholder="customer@gmail.com">
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЙроЩрпНроХро│рпН роИроорпЖропро┐ро▓рпН (From):</label>
                        <input type="email" id="senderEmail" class="input-field" value="dhasscsc@gmail.com" readonly>
                    </div>
                    
                    <div class="email-options">
                        <button class="email-option-btn active" onclick="setEmailType('service_info')">
                            <i class="fas fa-info-circle"></i> роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН
                        </button>
                        <button class="email-option-btn" onclick="setEmailType('documents_list')">
                            <i class="fas fa-file-alt"></i> роЖро╡рогрокрпН рокроЯрпНроЯро┐ропро▓рпН
                        </button>
                        <button class="email-option-btn" onclick="setEmailType('quotation')">
                            <i class="fas fa-file-invoice"></i> ро╡ро┐ро▓рпИрокрпНрокроЯрпНроЯро┐ропро▓рпН
                        </button>
                        <button class="email-option-btn" onclick="setEmailType('reminder')">
                            <i class="fas fa-bell"></i> роиро┐ройрпИро╡рпВроЯрпНроЯро▓рпН
                        </button>
                    </div>
                    
                    <button class="email-test-btn" onclick="testEmailMessage()"><i class="fas fa-vial"></i> роИроорпЖропро┐ро▓рпН роЪрпЖропрпНродро┐ роЪрпЛродройрпИ</button>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роИроорпЖропро┐ро▓рпН роорпБройрпНройрпЛроЯрпНроЯроорпН:</label>
                        <div class="message-preview" id="emailMessagePreview">ро╡рогроХрпНроХроорпН [рокрпЖропро░рпН]!

родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▒рпНроХрпБ роиро▓рпНро╡ро░ро╡рпБ!

роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН...</div>
                    </div>
                    <button type="button" class="email-btn" onclick="sendEmail()">
                        <i class="fas fa-paper-plane"></i> роИроорпЖропро┐ро▓рпН роЕройрпБрокрпНрокрпБ
                    </button>
                </div>
            </div>
            
            <!-- роиройрпНро▒ро┐ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ рокроХрпБродро┐ -->
            <div class="whatsapp-section" style="background: linear-gradient(135deg, #8E44AD 0%, #6C3483 100%); margin-top: 30px;">
                <div class="whatsapp-header">
                    <i class="fas fa-hands-helping"></i>
                    <h3>роирпЗро░ро┐ро▓рпН ро╡роирпНрод ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпБроХрпНроХрпБ роиройрпНро▒ро┐ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ</h3>
                </div>
                <div class="whatsapp-message-box">
                    <div class="customer-inputs">
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН *</label>
                            <input type="text" id="thankYouCustomerName" class="input-field" placeholder="ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН">
                        </div>
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпН *</label>
                            <input type="tel" id="thankYouCustomerPhone" class="input-field" placeholder="9843232324">
                        </div>
                    </div>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЪрпЗро╡рпИроХро│ро┐ройрпН рокрпЖропро░рпНроХро│рпН (роХро╛ро▒рпНрокрпБро│рпНро│ро┐ропро╛ро▓рпН рокро┐ро░ро┐роХрпНроХро╡рпБроорпН)</label>
                        <input type="text" id="thankYouServices" class="input-field" placeholder="роО.роХро╛: роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ, рокро╛ро╕рпНрокрпЛро░рпНроЯрпН рокрпЛроЯрпНроЯрпЛ, рокро╛ройрпН роХро╛ро░рпНроЯрпБ">
                    </div>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН (ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН)</label>
                        <input type="text" id="thankYouRefNumbers" class="input-field" placeholder="роО.роХро╛: REF001, REF002">
                    </div>
                    <button class="whatsapp-test-btn" onclick="testThankYouMessage()"><i class="fas fa-vial"></i> роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роЪрпЛродройрпИ</button>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:</label>
                        <div class="message-preview" id="thankYouMessagePreview">ро╡рогроХрпНроХроорпН [рокрпЖропро░рпН]!

роОроЩрпНроХро│рпН родро╛ро╕рпН рокрпКродрпБроЪрпЗро╡рпИ роорпИропродрпНродрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНродрпБ, ро╡ро░рпБроХрпИ рокрпБро░ро┐роирпНродроорпИроХрпНроХрпБ, рооро┐роХро╡рпБроорпН роиройрпНро▒ро┐.

роЪрпЗро╡рпИроХро│рпН: [роЪрпЗро╡рпИроХро│рпН]
роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН: [роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН]

роЗроирпНрод роиро╛ро│рпН роЗройро┐родро╛роХ роЕроорпИроп ро╡ро╛ро┤рпНродрпНродрпБроХро┐ро▒рпЛроорпН.

роиройрпНро▒ро┐!
родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН
родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1</div>
                    </div>
                    <button type="button" class="whatsapp-btn" onclick="sendThankYouMessage()" style="background: #9B59B6; color: white;"><i class="fab fa-whatsapp"></i> роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрпБ</button>
                </div>
            </div>
            
            <!-- роЪрпЗро╡рпИ роиро┐ро▓рпИ роорпЖроЪрпЗроЬрпНроХро│рпН рокроХрпБродро┐ -->
            <div class="whatsapp-section" style="background: linear-gradient(135deg, #3498DB 0%, #2980B9 100%); margin-top: 30px;">
                <div class="whatsapp-header">
                    <i class="fas fa-tasks"></i>
                    <h3>роЪрпЗро╡рпИ роиро┐ро▓рпИ WhatsApp роЪрпЖропрпНродро┐роХро│рпН</h3>
                </div>
                <div class="whatsapp-message-box">
                    <div class="customer-inputs">
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН *</label>
                            <input type="text" id="statusCustomerName" class="input-field" placeholder="ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН">
                        </div>
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпН *</label>
                            <input type="tel" id="statusCustomerPhone" class="input-field" placeholder="9843232324">
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЪрпЗро╡рпИ/роХрпЛро░ро┐роХрпНроХрпИ ро╡ро┐рокро░роорпН *</label>
                        <input type="text" id="statusService" class="input-field" placeholder="роО.роХро╛: рокро╛ро╕рпНрокрпЛро░рпНроЯрпН рокрпБроХрпИрокрпНрокроЯроорпН, роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ">
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <label class="input-label">роХрпБро▒ро┐рокрпНрокрпБ роОрогрпН/ро░рпЖроГрокро░ройрпНро╕рпН роОрогрпН</label>
                        <input type="text" id="statusRefNumber" class="input-field" placeholder="REF001, PS-2024-001">
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <label class="input-label">роХрпБро▒ро┐рокрпНрокрпБ (ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН)</label>
                        <input type="text" id="statusNote" class="input-field" placeholder="роорпЗро▓родро┐роХ родроХро╡ро▓рпНроХро│рпН">
                    </div>
                    
                    <!-- роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпН рокроХрпБродро┐ (роЪрпЗро╡рпИ роиро┐ро▓рпИ) -->
                    <div class="attachment-section">
                        <label class="input-label"><i class="fas fa-paperclip"></i> роЖро╡рогроЩрпНроХро│рпИ роЗрогрпИроХрпНроХро╡рпБроорпН (ро╡ро┐ро░рпБрокрпНрокродрпНродрпЗро░рпНро╡рпБ)</label>
                        <div class="attachment-list" id="statusAttachmentList"></div>
                        <div class="upload-area" onclick="document.getElementById('statusFileInput').click()">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>роЖро╡рогроЩрпНроХро│рпИ роЗроЩрпНроХрпЗ роЗро┤рпБродрпНродрпБ ро╡ро┐роЯро╡рпБроорпН роЕро▓рпНро▓родрпБ роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН</p>
                            <p style="font-size: 12px; opacity: 0.8;">PDF, Word, Excel, Image files</p>
                            <input type="file" id="statusFileInput" class="file-input" multiple onchange="handleStatusFileUpload(event)">
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЪрпЗро╡рпИ роиро┐ро▓рпИ родрпЗро░рпНро╡рпБ *</label>
                        <select id="statusType" class="input-field" onchange="updateStatusMessage()">
                            <option value="welcome">ро╡ро░ро╡рпЗро▒рпНрокрпБ роорпЖроЪрпЗроЬрпН</option>
                            <option value="received">роХрпЛро░ро┐роХрпНроХрпИ рокрпЖро▒рокрпНрокроЯрпНроЯродрпБ</option>
                            <option value="processing">роЪрпЖропро▓ро┐ро▓рпН роЙро│рпНро│родрпБ</option>
                            <option value="reference">роХрпБро▒ро┐рокрпНрокрпБ роОрогрпН роорпЖроЪрпЗроЬрпН</option>
                            <option value="completed">роиро┐ро▒рпИро╡роЯрпИроирпНродродрпБ</option>
                            <option value="payment_request">роХроЯрпНроЯрогроорпН роЪрпЖро▓рпБродрпНродрпБ</option>
                            <option value="payment_reminder">роХроЯрпНроЯрогроорпН роиро┐ройрпИро╡рпВроЯрпНроЯро▓рпН</option>
                            <option value="ready">роЪрпЗро╡рпИ родропро╛ро░рпН</option>
                            <option value="followup">рокро┐ройрпНродрпКроЯро░рпНродро▓рпН</option>
                        </select>
                    </div>
                    
                    <div class="status-options">
                        <div class="status-option-btn" onclick="setStatusType('welcome')">ЁЯСЛ ро╡ро░ро╡рпЗро▒рпНрокрпБ</div>
                        <div class="status-option-btn" onclick="setStatusType('received')">тЬЕ рокрпЖро▒рокрпНрокроЯрпНроЯродрпБ</div>
                        <div class="status-option-btn" onclick="setStatusType('processing')">тЪЩя╕П роЪрпЖропро▓ро┐ро▓рпН</div>
                        <div class="status-option-btn" onclick="setStatusType('reference')">ЁЯУД роХрпБро▒ро┐рокрпНрокрпБ роОрогрпН</div>
                        <div class="status-option-btn" onclick="setStatusType('completed')">ЁЯОЙ роиро┐ро▒рпИро╡рпБ</div>
                        <div class="status-option-btn" onclick="setStatusType('payment_request')">ЁЯТ░ роХроЯрпНроЯрогроорпН</div>
                        <div class="status-option-btn" onclick="setStatusType('payment_reminder')">тП░ роиро┐ройрпИро╡рпВроЯрпНроЯро▓рпН</div>
                        <div class="status-option-btn" onclick="setStatusType('ready')">ЁЯУж родропро╛ро░рпН</div>
                        <div class="status-option-btn" onclick="setStatusType('followup')">ЁЯУЮ рокро┐ройрпНродрпКроЯро░рпНродро▓рпН</div>
                    </div>
                    
                    <button class="whatsapp-test-btn" onclick="testStatusMessage()"><i class="fas fa-vial"></i> роиро┐ро▓рпИ роЪрпЖропрпНродро┐ роЪрпЛродройрпИ</button>
                    
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:</label>
                        <div class="message-preview" id="statusMessagePreview">
                            ро╡рогроХрпНроХроорпН [рокрпЖропро░рпН]!

родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▓рпН роЙроЩрпНроХро│рпН [роЪрпЗро╡рпИ] роХрпЛро░ро┐роХрпНроХрпИ рокрпЖро▒рокрпНрокроЯрпНроЯродрпБ.

роиройрпНро▒ро┐!
родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН
родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1
                        </div>
                    </div>
                    
                    <button type="button" class="whatsapp-btn" onclick="sendStatusMessage()" style="background: #3498DB; color: white;">
                        <i class="fab fa-whatsapp"></i> роиро┐ро▓рпИ роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрпБ
                    </button>
                </div>
            </div>
            
            <div class="action-buttons">
                <button type="button" class="action-btn btn-print" onclick="printPage()"><i class="fas fa-print"></i> роЕроЪрпНроЪро┐роЯрпБ</button>
                <button type="button" class="action-btn btn-save" onclick="saveServiceInfo()"><i class="fas fa-save"></i> роЪрпЗрооро┐</button>
                <button type="button" class="action-btn btn-reset" onclick="resetPredefinedServices()"><i class="fas fa-undo"></i> ро░рпЖроЯро┐роорпЗроЯрпН роорпАроЯрпНроЯроорпИ</button>
                <button type="button" class="action-btn btn-clear" onclick="clearAll()"><i class="fas fa-trash"></i> роЕро┤ро┐</button>
            </div>
        </div>
        <div class="footer">
            <p>роиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!</p>
            <p>родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН, родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1</p>
            <p style="font-size: 13px; margin-top: 8px; opacity: 0.8;">┬й 2024 роЕройрпИродрпНродрпБ роЙро░ро┐роорпИроХро│рпБроорпН рокро╛родрпБроХро╛роХрпНроХрокрпНрокроЯрпНроЯро╡рпИ</p>
        </div>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="addDocumentModal">
        <div class="modal-content">
            <div class="modal-header">рокрпБродро┐роп роЖро╡рогроорпН роЪрпЗро░рпНроХрпНроХ</div>
            <input type="text" id="newDocument" class="modal-input" placeholder="роЖро╡рогродрпНродро┐ройрпН рокрпЖропро░рпН (роО.роХро╛: ро╡ро╛роХрпНроХрпБроЪрпНроЪрпАроЯрпНроЯрпБ)" autofocus>
            <div class="modal-buttons">
                <button type="button" class="btn-add" onclick="addDocument()">роЪрпЗро░рпНроХрпНроХ</button>
                <button type="button" class="btn-cancel" onclick="closeAddDocumentModal()">ро░родрпНродрпБ</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="editServiceModal">
        <div class="modal-content">
            <div class="modal-header">роЪрпЗро╡рпИропрпИ родро┐ро░рпБродрпНродрпБ</div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИропро┐ройрпН рокрпЖропро░рпН *</label>
                <input type="text" id="editServiceName" class="modal-input" placeholder="роЪрпЗро╡рпИ рокрпЖропро░рпН">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ ро╡роХрпИ *</label>
                <select id="editServiceCategory" class="modal-input">
                    <option value="род роЕро░роЪрпБ роЪрпЗро╡рпИ">род роЕро░роЪрпБ роЪрпЗро╡рпИ</option>
                    <option value="роо роЕро░роЪрпБ роЪрпЗро╡рпИ">роо роЕро░роЪрпБ роЪрпЗро╡рпИ</option>
                    <option value="роЗ роЪрпЗро╡рпИ">роЗ роЪрпЗро╡рпИ</option>
                    <option value="рокрпКродрпБ роЪрпЗро╡рпИ">рокрпКродрпБ роЪрпЗро╡рпИ</option>
                    <option value="роЗродро░ роЪрпЗро╡рпИ">роЗродро░ роЪрпЗро╡рпИ</option>
                    <option value="роЪро┐ро▒рокрпНрокрпБ роЪрпЗро╡рпИроХро│рпН">роЪро┐ро▒рокрпНрокрпБ роЪрпЗро╡рпИроХро│рпН</option>
                    <option value="ро╡ро╛роХройроорпН">ро╡ро╛роХройроорпН</option>
                    <option value="роХро▓рпНро╡ро┐">роХро▓рпНро╡ро┐</option>
                    <option value="рооро░рпБродрпНродрпБро╡роорпН">рооро░рпБродрпНродрпБро╡роорпН</option>
                    <option value="рокро┐ро▒">рокро┐ро▒</option>
                </select>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ роХроЯрпНроЯрогроорпН (тВ╣) *</label>
                <input type="number" id="editServicePrice" class="modal-input" placeholder="0.00" min="0" step="0.01">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ ро╡ро┐ро│роХрпНроХроорпН</label>
                <textarea id="editServiceDescription" class="modal-textarea" placeholder="роЪрпЗро╡рпИ рокро▒рпНро▒ро┐роп ро╡ро┐рокро░роЩрпНроХро│рпН..."></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН (роТро╡рпНро╡рпКро░рпБ ро╡ро░ро┐ропро┐ро▓рпБроорпН роТройрпНро▒рпБ)</label>
                <textarea id="editServiceDocuments" class="modal-textarea" placeholder="роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ
рокрпБроХрпИрокрпНрокроЯроорпН
роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роРроХро╛ройрпН</label>
                <select id="editServiceIcon" class="modal-input">
                    <option value="fas fa-id-card">роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ</option><option value="fas fa-credit-card">рокро╛ройрпН роХро╛ро░рпНроЯрпБ</option>
                    <option value="fas fa-camera">рокрпБроХрпИрокрпНрокроЯроорпН</option><option value="fas fa-passport">рокро╛ро╕рпНрокрпЛро░рпНроЯрпН</option>
                    <option value="fas fa-car">ро╡ро╛роХройроорпН</option><option value="fas fa-graduation-cap">роХро▓рпНро╡ро┐</option>
                    <option value="fas fa-file-contract">роЖро╡рогроорпН</option><option value="fas fa-stamp">роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН</option>
                    <option value="fas fa-file-signature">роХрпИропрпКрокрпНрокроорпН</option><option value="fas fa-print">роЕроЪрпНроЪро┐роЯрпБродро▓рпН</option>
                    <option value="fas fa-certificate">роЪро╛ройрпНро▒ро┐родро┤рпН</option><option value="fas fa-home">роорпБроХро╡ро░ро┐</option>
                    <option value="fas fa-briefcase">ро╡рпЗро▓рпИ</option><option value="fas fa-plane">ро╡ро┐роЪро╛</option>
                    <option value="fas fa-heartbeat">рооро░рпБродрпНродрпБро╡роорпН</option><option value="fas fa-wallet">рокрогроорпН</option>
                    <option value="fas fa-mobile-alt">роорпКрокрпИро▓рпН</option><option value="fas fa-laptop">роХроорпНрокрпНропрпВроЯрпНроЯро░рпН</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn-add" onclick="saveEditedService()">роЪрпЗрооро┐</button>
                <button type="button" class="btn-cancel" onclick="closeEditServiceModal()">ро░родрпНродрпБ</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="addServiceModal">
        <div class="modal-content">
            <div class="modal-header">рокрпБродро┐роп роЪрпЗро╡рпИ роЪрпЗро░рпНроХрпНроХ</div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИропро┐ройрпН рокрпЖропро░рпН *</label>
                <input type="text" id="newServiceName" class="modal-input" placeholder="роО.роХро╛: роороХро┐ро┤рпБроирпНродрпБ роЙро░ро┐роороорпН ро╡ро┐рогрпНрогрокрпНрокроорпН" autofocus>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ ро╡роХрпИ *</label>
                <select id="newServiceCategory" class="modal-input">
                    <option value="род роЕро░роЪрпБ роЪрпЗро╡рпИ">род роЕро░роЪрпБ роЪрпЗро╡рпИ</option>
                    <option value="роо роЕро░роЪрпБ роЪрпЗро╡рпИ">роо роЕро░роЪрпБ роЪрпЗро╡рпИ</option>
                    <option value="роЗ роЪрпЗро╡рпИ">роЗ роЪрпЗро╡рпИ</option>
                    <option value="рокрпКродрпБ роЪрпЗро╡рпИ">рокрпКродрпБ роЪрпЗро╡рпИ</option>
                    <option value="роЗродро░ роЪрпЗро╡рпИ">роЗродро░ роЪрпЗро╡рпИ</option>
                    <option value="роЪро┐ро▒рокрпНрокрпБ роЪрпЗро╡рпИроХро│рпН">роЪро┐ро▒рокрпНрокрпБ роЪрпЗро╡рпИроХро│рпН</option>
                    <option value="ро╡ро╛роХройроорпН">ро╡ро╛роХройроорпН</option>
                    <option value="роХро▓рпНро╡ро┐">роХро▓рпНро╡ро┐</option>
                    <option value="рооро░рпБродрпНродрпБро╡роорпН">рооро░рпБродрпНродрпБро╡роорпН</option>
                    <option value="рокро┐ро▒">рокро┐ро▒</option>
                </select>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ роХроЯрпНроЯрогроорпН (тВ╣) *</label>
                <input type="number" id="newServicePrice" class="modal-input" placeholder="0.00" min="0" step="0.01">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ ро╡ро┐ро│роХрпНроХроорпН</label>
                <textarea id="newServiceDescription" class="modal-textarea" placeholder="роЪрпЗро╡рпИ рокро▒рпНро▒ро┐роп ро╡ро┐рокро░роЩрпНроХро│рпН..."></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН (роТро╡рпНро╡рпКро░рпБ ро╡ро░ро┐ропро┐ро▓рпБроорпН роТройрпНро▒рпБ)</label>
                <textarea id="newServiceDocuments" class="modal-textarea" placeholder="роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ
рокрпБроХрпИрокрпНрокроЯроорпН
роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роРроХро╛ройрпН</label>
                <select id="newServiceIcon" class="modal-input">
                    <option value="fas fa-id-card">роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ</option><option value="fas fa-credit-card">рокро╛ройрпН роХро╛ро░рпНроЯрпБ</option>
                    <option value="fas fa-camera">рокрпБроХрпИрокрпНрокроЯроорпН</option><option value="fas fa-passport">рокро╛ро╕рпНрокрпЛро░рпНроЯрпН</option>
                    <option value="fas fa-car">ро╡ро╛роХройроорпН</option><option value="fas fa-graduation-cap">роХро▓рпНро╡ро┐</option>
                    <option value="fas fa-file-contract">роЖро╡рогроорпН</option><option value="fas fa-stamp">роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН</option>
                    <option value="fas fa-file-signature">роХрпИропрпКрокрпНрокроорпН</option><option value="fas fa-print">роЕроЪрпНроЪро┐роЯрпБродро▓рпН</option>
                    <option value="fas fa-certificate">роЪро╛ройрпНро▒ро┐родро┤рпН</option><option value="fas fa-home">роорпБроХро╡ро░ро┐</option>
                    <option value="fas fa-briefcase">ро╡рпЗро▓рпИ</option><option value="fas fa-plane">ро╡ро┐роЪро╛</option>
                    <option value="fas fa-heartbeat">рооро░рпБродрпНродрпБро╡роорпН</option><option value="fas fa-wallet">рокрогроорпН</option>
                    <option value="fas fa-mobile-alt">роорпКрокрпИро▓рпН</option><option value="fas fa-laptop">роХроорпНрокрпНропрпВроЯрпНроЯро░рпН</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn-add" onclick="saveNewService()">роЪрпЗро╡рпИропрпИ роЪрпЗро░рпНроХрпНроХ</button>
                <button type="button" class="btn-cancel" onclick="closeAddServiceModal()">ро░родрпНродрпБ</button>
            </div>
        </div>
    </div>
    
    <!-- Cloud Link Modal -->
    <div class="modal" id="cloudLinkModal">
        <div class="modal-content">
            <div class="modal-header">роХрпНро│ро╡рпБроЯрпН ро╕рпНроЯрпЛро░рпЗроЬрпН роЗрогрпИрокрпНрокрпБ роЪрпЗро░рпНроХрпНроХ</div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЗрогрпИрокрпНрокрпБ рокрпЖропро░рпН *</label>
                    <input type="text" id="cloudLinkName" class="modal-input" placeholder="роО.роХро╛: рокро╛ро╕рпНрокрпЛро░рпНроЯрпН рокроЯро┐ро╡роорпН" autofocus>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЗрогрпИрокрпНрокрпБ URL *</label>
                <input type="url" id="cloudLinkUrl" class="modal-input" placeholder="https://drive.google.com/...">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">ро╡роХрпИ</label>
                <select id="cloudLinkType" class="modal-input">
                    <option value="google-drive">Google Drive</option>
                    <option value="dropbox">Dropbox</option>
                    <option value="onedrive">OneDrive</option>
                    <option value="other">рооро▒рпНро▒ро╡рпИ</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn-add" onclick="addCloudLinkFromModal()">роЪрпЗро░рпНроХрпНроХ</button>
                <button type="button" class="btn-cancel" onclick="closeCloudLinkModal()">ро░родрпНродрпБ</button>
            </div>
        </div>
    </div>

    <script>
        const originalPredefinedServices = [
            { id: 1, name: "роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ рокро┐ро░ро┐рогрпНроЯрпН", category: "род роЕро░роЪрпБ роЪрпЗро╡рпИ", price: 10.00, description: "роЖродро╛ро░рпН роХро╛ро░рпНроЯрпИ роЕроЪрпНроЪро┐роЯрпБродро▓рпН рооро▒рпНро▒рпБроорпН ро▓рпЗрооро┐ройрпЗро╖ройрпН", icon: "fas fa-id-card", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ (роЕроЪро▓рпН + роироХро▓рпН)", "роорпКрокрпИро▓рпН роОрогрпН (роЖродро╛ро░рпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ)", "рокрпБроХрпИрокрпНрокроЯроорпН (рокро╛ро╕рпНрокрпЛро░рпНроЯрпН роЕро│ро╡рпБ)"], isPredefined: true },
            { id: 2, name: "рокро╛ройрпН роХро╛ро░рпНроЯрпБ ро╡ро┐рогрпНрогрокрпНрокроорпН", category: "род роЕро░роЪрпБ роЪрпЗро╡рпИ", price: 120.00, description: "рокрпБродро┐роп рокро╛ройрпН роХро╛ро░рпНроЯро┐ро▒рпНроХро╛рой ро╡ро┐рогрпНрогрокрпНрокроорпН рооро▒рпНро▒рпБроорпН роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ", icon: "fas fa-credit-card", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокрпБроХрпИрокрпНрокроЯроорпН 2 (рокро╛ро╕рпНрокрпЛро░рпНроЯрпН роЕро│ро╡рпБ)", "роХрпИропрпКрокрпНрокроорпН", "роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"], isPredefined: true },
            { id: 3, name: "рокро╛ро╕рпНрокрпЛро░рпНроЯрпН рокрпЛроЯрпНроЯрпЛ", category: "роЗ роЪрпЗро╡рпИ", price: 50.00, description: "рокро╛ро╕рпНрокрпЛро░рпНроЯрпН роЕро│ро╡рпБ рокрпБроХрпИрокрпНрокроЯроорпН роОроЯрпБродрпНродро▓рпН рооро▒рпНро▒рпБроорпН роЕроЪрпНроЪро┐роЯрпБродро▓рпН", icon: "fas fa-camera", documents: ["роОроирпНрод роЖро╡рогроорпБроорпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ", "роХро░рпБрокрпНрокрпБ/роирпАро▓ ро╖ро░рпНроЯрпН роЕрогро┐ропро╡рпБроорпН"], isPredefined: true },
            { id: 4, name: "ро╡рпЛроЯрпНроЯро░рпН роРроЯро┐ роХро╛ро░рпНроЯрпБ", category: "род роЕро░роЪрпБ роЪрпЗро╡рпИ", price: 25.00, description: "ро╡рпЛроЯрпНроЯро░рпН роРроЯро┐ роХро╛ро░рпНроЯрпБ ро╡ро┐рогрпНрогрокрпНрокроорпН рооро▒рпНро▒рпБроорпН роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ", icon: "fas fa-vote-yea", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокрпБроХрпИрокрпНрокроЯроорпН", "ро╡ропродрпБ роЪро╛ройрпНро▒рпБ", "роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"], isPredefined: true },
            { id: 5, name: "ро░рпЗро╖ройрпН роХро╛ро░рпНроЯрпБ ро╡ро┐рогрпНрогрокрпНрокроорпН", category: "род роЕро░роЪрпБ роЪрпЗро╡рпИ", price: 80.00, description: "рокрпБродро┐роп ро░рпЗро╖ройрпН роХро╛ро░рпНроЯро┐ро▒рпНроХро╛рой ро╡ро┐рогрпНрогрокрпНрокроорпН", icon: "fas fa-shopping-basket", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒рпБ", "роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ", "рокрпБроХрпИрокрпНрокроЯроорпН"], isPredefined: true },
            { id: 6, name: "роХрпБроЯрпБроорпНрокроЪрпН роЪро╛ройрпНро▒рпБ", category: "рокрпКродрпБ роЪрпЗро╡рпИ", price: 40.00, description: "роХрпБроЯрпБроорпНрокроЪрпН роЪро╛ройрпНро▒рпБ родропро╛ро░ро┐родрпНродро▓рпН рооро▒рпНро▒рпБроорпН роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН", icon: "fas fa-home", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ (роЕройрпИродрпНродрпБ роЙро▒рпБрокрпНрокро┐ройро░рпНроХро│рпН)", "ро╡ро╛роХрпНроХро╛ро│ро░рпН роРроЯро┐ роХро╛ро░рпНроЯрпБ", "роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"], isPredefined: true },
            { id: 7, name: "ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒рпБ", category: "рокрпКродрпБ роЪрпЗро╡рпИ", price: 60.00, description: "ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒рпБ родропро╛ро░ро┐родрпНродро▓рпН рооро▒рпНро▒рпБроорпН роЪро╛ройрпНро▒ро┐родро┤рпН", icon: "fas fa-file-invoice-dollar", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокро╛ройрпН роХро╛ро░рпНроЯрпБ", "ро╡ро░ро┐ ро░роЪрпАродрпБ", "ро╡рпЗро▓рпИ роЪро╛ройрпНро▒рпБ"], isPredefined: true },
            { id: 8, name: "роЯро┐рокрпНро│рпЛрооро╛ роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН", category: "рокрпКродрпБ роЪрпЗро╡рпИ", price: 100.00, description: "роХро▓рпНро╡ро┐ роЪро╛ройрпНро▒рпБроХро│рпН роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН", icon: "fas fa-graduation-cap", documents: ["роЯро┐рокрпНро│рпЛрооро╛/роЯро┐роХро┐ро░ро┐ роЕроЪро▓рпН", "рооро╛ро░рпНроХрпН ро╖рпАроЯрпН роЕроЪро▓рпН", "роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокрпБроХрпИрокрпНрокроЯроорпН"], isPredefined: true },
            { id: 9, name: "рокро╛ро╕рпНрокрпЛро░рпНроЯрпН ро╡ро┐рогрпНрогрокрпНрокроорпН", category: "роЗродро░ роЪрпЗро╡рпИ", price: 300.00, description: "рокрпБродро┐роп рокро╛ро╕рпНрокрпЛро░рпНроЯро┐ро▒рпНроХро╛рой ро╡ро┐рогрпНрогрокрпНрокроорпН рооро▒рпНро▒рпБроорпН роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ", icon: "fas fa-passport", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокро╛ройрпН роХро╛ро░рпНроЯрпБ", "рокро┐ро▒рокрпНрокрпБ роЪро╛ройрпНро▒рпБ", "ро╡ро╛роХрпНроХро╛ро│ро░рпН роРроЯро┐", "рокрпБроХрпИрокрпНрокроЯроорпН 4"], isPredefined: true },
            { id: 10, name: "ро╡ро┐роЪро╛ роЖро╡рогроЩрпНроХро│рпН", category: "роЪро┐ро▒рокрпНрокрпБ роЪрпЗро╡рпИроХро│рпН", price: 500.00, description: "ро╡ро┐роЪро╛ ро╡ро┐рогрпНрогрокрпНрокродрпНродро┐ро▒рпНроХро╛рой роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ рооро▒рпНро▒рпБроорпН роЪро╛ройрпНро▒ро┐родро┤рпН", icon: "fas fa-plane", documents: ["рокро╛ро╕рпНрокрпЛро░рпНроЯрпН", "рокро╛ро▓рпН ро╕рпНро▓ро┐рокрпН 6 рооро╛родроорпН", "ро╡роЩрпНроХро┐ рокрпЗро▓ройрпНро╕рпН", "ро╡рпЗро▓рпИ роЪро╛ройрпНро▒рпБ", "рокрпБроХрпИрокрпНрокроЯроорпН"], isPredefined: true }
        ];
        let predefinedServices = [...originalPredefinedServices];
        let customServices = [];
        let currentService = { id: 0, name: "роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", category: "роЪрпЗро╡рпИ ро╡роХрпИ", price: 0, description: "роорпЗро▓рпЗ роЙро│рпНро│ рокроЯрпНроЯройрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", icon: "fas fa-question-circle", documents: ["роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН"], customDocuments: [], isPredefined: false };
        let activeFilter = 'all';
        let emailType = 'service_info'; // Default email type
        
        // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпН
        let attachments = [];
        let statusAttachments = [];
        let cloudLinks = [];
        
        document.addEventListener('DOMContentLoaded', function() {
            loadAllServices(); updateDisplay(); updateWhatsAppMessage(); updateEmailMessage(); loadSavedData();
            document.getElementById('serviceSearch').addEventListener('input', function() { renderServices(); });
            document.getElementById('customerName').addEventListener('input', updateWhatsAppMessage);
            document.getElementById('customerPhone').addEventListener('input', updateWhatsAppMessage);
            
            // Email event listeners
            document.getElementById('emailCustomerName').addEventListener('input', updateEmailMessage);
            document.getElementById('emailCustomerEmail').addEventListener('input', updateEmailMessage);
            document.getElementById('senderEmail').addEventListener('input', updateEmailMessage);
            
            // роиройрпНро▒ро┐ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ event listeners
            document.getElementById('thankYouCustomerName').addEventListener('input', updateThankYouMessage);
            document.getElementById('thankYouCustomerPhone').addEventListener('input', updateThankYouMessage);
            document.getElementById('thankYouServices').addEventListener('input', updateThankYouMessage);
            document.getElementById('thankYouRefNumbers').addEventListener('input', updateThankYouMessage);
            
            // роЪрпЗро╡рпИ роиро┐ро▓рпИ роорпЖроЪрпЗроЬрпН event listeners
            document.getElementById('statusCustomerName').addEventListener('input', updateStatusMessage);
            document.getElementById('statusCustomerPhone').addEventListener('input', updateStatusMessage);
            document.getElementById('statusService').addEventListener('input', updateStatusMessage);
            document.getElementById('statusRefNumber').addEventListener('input', updateStatusMessage);
            document.getElementById('statusNote').addEventListener('input', updateStatusMessage);
            document.getElementById('statusType').addEventListener('change', updateStatusMessage);
            
            // Initialize status message
            updateStatusMessage();
            
            // Initialize drag and drop
            initializeDragAndDrop();
            
            // Load saved attachments
            loadAttachments();
        });
        
        function loadAllServices() {
            const savedPredefinedServices = localStorage.getItem('dhassPredefinedServices');
            if (savedPredefinedServices) { try { predefinedServices = JSON.parse(savedPredefinedServices); } catch (e) { predefinedServices = [...originalPredefinedServices]; } }
            const savedCustomServices = localStorage.getItem('dhassCustomServices');
            if (savedCustomServices) { try { customServices = JSON.parse(savedCustomServices); } catch (e) { customServices = []; } }
            renderServices(); updateServiceCount();
        }
        
        // Email Message Functions
        function updateEmailMessage() {
            const customerName = document.getElementById('emailCustomerName').value || '[рокрпЖропро░рпН]';
            const customerEmail = document.getElementById('emailCustomerEmail').value || '[роИроорпЖропро┐ро▓рпН]';
            const senderEmail = document.getElementById('senderEmail').value || 'dhasscsc@gmail.com';
            
            let subject = '';
            let message = '';
            
            switch(emailType) {
                case 'service_info':
                    subject = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - ${currentService.name}`;
                    message = `роЕройрпНрокрпБро│рпНро│ ${customerName},\n\n`;
                    message += `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▓рпН роЙроЩрпНроХро│рпИ ро╡ро░ро╡рпЗро▒рпНроХро┐ро▒рпЛроорпН!\n\n`;
                    message += `роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН:\n`;
                    message += `тАв роЪрпЗро╡рпИ: ${currentService.name}\n`;
                    message += `тАв ро╡роХрпИ: ${currentService.category}\n`;
                    message += `тАв роХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}\n\n`;
                    if (currentService.description) {
                        message += `роЪрпЗро╡рпИ ро╡ро┐ро│роХрпНроХроорпН:\n${currentService.description}\n\n`;
                    }
                    const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
                    if (allDocuments.length > 0) {
                        message += `родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:\n`;
                        allDocuments.forEach((doc, index) => { message += `тЬУ ${doc}\n`; });
                        message += `\n`;
                    }
                    message += `родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│:\n`;
                    message += `родрпКро▓рпИрокрпЗроЪро┐: 8870232332, 9843232324\n`;
                    message += `WhatsApp: 9843232324\n`;
                    message += `роИроорпЖропро┐ро▓рпН: dhasscsc@gmail.com\n`;
                    message += `роорпБроХро╡ро░ро┐: родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1\n\n`;
                    message += `роиройрпНро▒ро┐,\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН\nродрпВродрпНродрпБроХрпНроХрпБроЯро┐-1`;
                    break;
                    
                case 'documents_list':
                    subject = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН`;
                    message = `роЕройрпНрокрпБро│рпНро│ ${customerName},\n\n`;
                    message += `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▓рпН ${currentService.name} роЪрпЗро╡рпИроХрпНроХрпБ родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│ро┐ройрпН рокроЯрпНроЯро┐ропро▓рпН.\n\n`;
                    const docs = [...(currentService.customDocuments || currentService.documents || [])];
                    if (docs.length > 0) {
                        message += `родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:\n`;
                        docs.forEach((doc, index) => { 
                            message += `${index + 1}. ${doc}\n`; 
                        });
                        message += `\n`;
                    }
                    message += `роХрпБро▒ро┐рокрпНрокрпБроХро│рпН:\n`;
                    message += `тАв роЕройрпИродрпНродрпБ роЖро╡рогроЩрпНроХро│рпБроорпН роЕроЪро▓рпН рооро▒рпНро▒рпБроорпН роироХро▓рпН роХрпКрогрпНроЯрпБ ро╡ро░ро╡рпБроорпН\n`;
                    message += `тАв рокрпБроХрпИрокрпНрокроЯроЩрпНроХро│рпН рокро╛ро╕рпНрокрпЛро░рпНроЯрпН роЕро│ро╡рпБ (3.5cm x 4.5cm)\n`;
                    message += `тАв роЖро╡рогроЩрпНроХро│рпН роЪро░ро┐ропро╛роХ роЗро░рпБроХрпНроХрпБроорпН роОрой роЙро▒рпБродро┐ роЪрпЖропрпНропро╡рпБроорпН\n\n`;
                    message += `родрпКроЯро░рпНрокрпБ роОрогрпНроХро│рпН: 8870232332, 9843232324\n\n`;
                    message += `роиройрпНро▒ро┐,\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН`;
                    break;
                    
                case 'quotation':
                    subject = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - ро╡ро┐ро▓рпИрокрпНрокроЯрпНроЯро┐ропро▓рпН`;
                    message = `роЕройрпНрокрпБро│рпНро│ ${customerName},\n\n`;
                    message += `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▓рпН ${currentService.name} роЪрпЗро╡рпИроХрпНроХро╛рой ро╡ро┐ро▓рпИрокрпНрокроЯрпНроЯро┐ропро▓рпН.\n\n`;
                    message += `роЪрпЗро╡рпИ: ${currentService.name}\n`;
                    message += `ро╡роХрпИ: ${currentService.category}\n`;
                    message += `роХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}\n\n`;
                    message += `роЪрпЗро╡рпИроХрпНроХро╛рой роЪрпЖро▓ро╡рпБроХро│рпН:\n`;
                    message += `тАв роЪрпЗро╡рпИ роХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}\n`;
                    message += `тАв ро╕рпНроЯро╛роорпНрокрпБ роХроЯрпНроЯрогроорпН: тВ╣${(currentService.price * 0.1).toFixed(2)} (роородро┐рокрпНрокрпАроЯрпБ)\n`;
                    message += `тАв роорпКродрпНрод родрпКроХрпИ: тВ╣${(currentService.price * 1.1).toFixed(2)}\n\n`;
                    message += `роХроЯрпНроЯрогроорпН роЪрпЖро▓рпБродрпНродрпБроорпН роорпБро▒рпИроХро│рпН:\n`;
                    message += `тАв рокрогроорпН\n`;
                    message += `тАв UPI (PhonePe, Google Pay)\n`;
                    message += `тАв ро╡роЩрпНроХро┐ рокро░ро┐рооро╛ро▒рпНро▒роорпН\n\n`;
                    message += `родрпКроЯро░рпНрокрпБ роОрогрпНроХро│рпН: 8870232332, 9843232324\n\n`;
                    message += `роиройрпНро▒ро┐,\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН`;
                    break;
                    
                case 'reminder':
                    subject = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роиро┐ройрпИро╡рпВроЯрпНроЯро▓рпН`;
                    const today = new Date();
                    const tomorrow = new Date(today);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    const formattedDate = tomorrow.toLocaleDateString('ta-IN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                    
                    message = `роЕройрпНрокрпБро│рпНро│ ${customerName},\n\n`;
                    message += `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▓рпН ${currentService.name} роЪрпЗро╡рпИ рокро▒рпНро▒ро┐роп роиро┐ройрпИро╡рпВроЯрпНроЯро▓рпН.\n\n`;
                    message += `роиро╛роЩрпНроХро│рпН роЙроЩрпНроХро│рпН ${currentService.name} роЪрпЗро╡рпИропрпИ роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБроХро┐ро▒рпЛроорпН. рокро┐ройрпНро╡ро░рпБроорпН ро╡ро┐ро╖ропроЩрпНроХро│рпИ роиро┐ройрпИро╡ро┐ро▓рпН роХрпКро│рпНро│ро╡рпБроорпН:\n\n`;
                    message += `1. родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпИ роХрпКрогрпНроЯрпБ ро╡ро░ро╡рпБроорпН\n`;
                    const docList = [...(currentService.customDocuments || currentService.documents || [])];
                    if (docList.length > 0) {
                        docList.forEach((doc, index) => { 
                            message += `   - ${doc}\n`; 
                        });
                    }
                    message += `\n2. роХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}\n\n`;
                    message += `3. роЕроЯрпБродрпНрод рокропрогродрпНродро┐ро▒рпНроХрпБ: ${formattedDate}\n\n`;
                    message += `родрпКроЯро░рпНрокрпБ роОрогрпНроХро│рпН: 8870232332, 9843232324\n\n`;
                    message += `роиройрпНро▒ро┐,\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН`;
                    break;
            }
            
            document.getElementById('emailMessagePreview').textContent = message;
        }
        
        function setEmailType(type) {
            emailType = type;
            
            // Update active button
            document.querySelectorAll('.email-option-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateEmailMessage();
        }
        
        function testEmailMessage() {
            const customerName = document.getElementById('emailCustomerName').value;
            const customerEmail = document.getElementById('emailCustomerEmail').value;
            
            if (!customerName || !customerEmail) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН роИроорпЖропро┐ро▓рпН роорпБроХро╡ро░ро┐ропрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            const message = document.getElementById('emailMessagePreview').textContent;
            alert('роИроорпЖропро┐ро▓рпН роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:\n\n' + message);
        }
        
        function sendEmail() {
            const customerName = document.getElementById('emailCustomerName').value;
            const customerEmail = document.getElementById('emailCustomerEmail').value;
            const senderEmail = document.getElementById('senderEmail').value;
            
            if (!customerName || !customerEmail) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН роИроорпЖропро┐ро▓рпН роорпБроХро╡ро░ро┐ропрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(customerEmail)) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛рой роИроорпЖропро┐ро▓рпН роорпБроХро╡ро░ро┐ропрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            let subject = '';
            switch(emailType) {
                case 'service_info': subject = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - ${currentService.name}`; break;
                case 'documents_list': subject = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН`; break;
                case 'quotation': subject = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - ро╡ро┐ро▓рпИрокрпНрокроЯрпНроЯро┐ропро▓рпН`; break;
                case 'reminder': subject = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роиро┐ройрпИро╡рпВроЯрпНроЯро▓рпН`; break;
            }
            
            const message = document.getElementById('emailMessagePreview').textContent;
            const encodedSubject = encodeURIComponent(subject);
            const encodedBody = encodeURIComponent(message);
            
            // Create mailto link
            const mailtoLink = `mailto:${customerEmail}?subject=${encodedSubject}&body=${encodedBody}`;
            
            // Open email client
            window.open(mailtoLink);
            
            // Save email info
            saveEmailInfo(customerName, customerEmail);
            
            alert(`роИроорпЖропро┐ро▓рпН родропро╛ро░рпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ!\n\n${customerName} (${customerEmail})\nродро╛ро╕рпН роИроорпЖропро┐ро▓рпН: ${senderEmail}`);
        }
        
        function saveEmailInfo(name, email) {
            const emailInfo = {
                name: name,
                email: email,
                service: currentService.name,
                date: new Date().toISOString(),
                type: emailType
            };
            
            // Save to localStorage
            const savedEmails = JSON.parse(localStorage.getItem('dhassEmails') || '[]');
            savedEmails.push(emailInfo);
            localStorage.setItem('dhassEmails', JSON.stringify(savedEmails));
        }
        
        // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпИ роПро▒рпНро▒рпБроорпН роЪрпЖропро▓рпНрокро╛роЯрпБ
        function loadAttachments() {
            const savedAttachments = localStorage.getItem('dhassAttachments');
            if (savedAttachments) { try { attachments = JSON.parse(savedAttachments); } catch (e) { attachments = []; } }
            
            const savedStatusAttachments = localStorage.getItem('dhassStatusAttachments');
            if (savedStatusAttachments) { try { statusAttachments = JSON.parse(savedStatusAttachments); } catch (e) { statusAttachments = []; } }
            
            const savedCloudLinks = localStorage.getItem('dhassCloudLinks');
            if (savedCloudLinks) { try { cloudLinks = JSON.parse(savedCloudLinks); } catch (e) { cloudLinks = []; } }
            
            renderAttachments();
            renderStatusAttachments();
            renderCloudLinks();
        }
        
        // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпИ роХро╛роЯрпНроЯрпБродро▓рпН
        function renderAttachments() {
            const attachmentList = document.getElementById('attachmentList');
            attachmentList.innerHTML = '';
            
            if (attachments.length === 0 && cloudLinks.length === 0) {
                attachmentList.innerHTML = '<div style="text-align: center; padding: 15px; opacity: 0.7;"><i class="fas fa-paperclip"></i> роЖро╡рогроЩрпНроХро│рпН роЗрогрпИроХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ</div>';
                return;
            }
            
            // Cloud links first
            cloudLinks.forEach((link, index) => {
                const item = document.createElement('div');
                item.className = 'attachment-item';
                item.innerHTML = `
                    <div class="attachment-info">
                        <i class="fas fa-link"></i>
                        <div>
                            <div class="attachment-name">${link.name}</div>
                            <div style="font-size: 11px; opacity: 0.7;">${link.type}</div>
                        </div>
                    </div>
                    <div class="attachment-actions">
                        <button class="attachment-btn" onclick="copyLink('${link.url}')"><i class="fas fa-copy"></i> роироХро▓рпН</button>
                        <button class="attachment-btn" onclick="removeCloudLink(${index})"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                attachmentList.appendChild(item);
            });
            
            // File attachments
            attachments.forEach((file, index) => {
                const item = document.createElement('div');
                item.className = 'attachment-item';
                item.innerHTML = `
                    <div class="attachment-info">
                        <i class="${getFileIcon(file.type)}"></i>
                        <div>
                            <div class="attachment-name">${file.name}</div>
                            <div style="font-size: 11px; opacity: 0.7;">${formatFileSize(file.size)}</div>
                        </div>
                    </div>
                    <div class="attachment-actions">
                        <button class="attachment-btn" onclick="previewAttachment(${index})"><i class="fas fa-eye"></i> рокро╛ро░рпНро╡рпИ</button>
                        <button class="attachment-btn" onclick="removeAttachment(${index})"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                attachmentList.appendChild(item);
            });
        }
        
        // роЪрпЗро╡рпИ роиро┐ро▓рпИ роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпИ роХро╛роЯрпНроЯрпБродро▓рпН
        function renderStatusAttachments() {
            const attachmentList = document.getElementById('statusAttachmentList');
            attachmentList.innerHTML = '';
            
            if (statusAttachments.length === 0) {
                attachmentList.innerHTML = '<div style="text-align: center; padding: 15px; opacity: 0.7;"><i class="fas fa-paperclip"></i> роЖро╡рогроЩрпНроХро│рпН роЗрогрпИроХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ</div>';
                return;
            }
            
            statusAttachments.forEach((file, index) => {
                const item = document.createElement('div');
                item.className = 'attachment-item';
                item.innerHTML = `
                    <div class="attachment-info">
                        <i class="${getFileIcon(file.type)}"></i>
                        <div>
                            <div class="attachment-name">${file.name}</div>
                            <div style="font-size: 11px; opacity: 0.7;">${formatFileSize(file.size)}</div>
                        </div>
                    </div>
                    <div class="attachment-actions">
                        <button class="attachment-btn" onclick="previewStatusAttachment(${index})"><i class="fas fa-eye"></i> рокро╛ро░рпНро╡рпИ</button>
                        <button class="attachment-btn" onclick="removeStatusAttachment(${index})"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                attachmentList.appendChild(item);
            });
        }
        
        // роХрпНро│ро╡рпБроЯрпН роЗрогрпИрокрпНрокрпБроХро│рпИ роХро╛роЯрпНроЯрпБродро▓рпН
        function renderCloudLinks() {
            // Already rendered in renderAttachments
        }
        
        // роХрпЛрокрпНрокрпБ роРроХро╛ройрпН роХро┐роЯрпИроХрпНроХрпБроорпН роЪрпЖропро▓рпНрокро╛роЯрпБ
        function getFileIcon(fileType) {
            if (fileType.includes('pdf')) return 'fas fa-file-pdf';
            if (fileType.includes('word') || fileType.includes('doc')) return 'fas fa-file-word';
            if (fileType.includes('excel') || fileType.includes('sheet')) return 'fas fa-file-excel';
            if (fileType.includes('image')) return 'fas fa-file-image';
            if (fileType.includes('text')) return 'fas fa-file-alt';
            return 'fas fa-file';
        }
        
        // роХрпЛрокрпНрокрпБ роЕро│ро╡рпИ ро╡роЯро┐ро╡роорпИродрпНродро▓рпН
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // роХрпЛрокрпНрокрпБ рокродро┐ро╡рпЗро▒рпНро▒родрпНродрпИ роХрпИропро╛ро│рпБродро▓рпН
        function handleFileUpload(event) {
            const files = event.target.files;
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                
                // роХрпЛрокрпНрокрпБ роЕро│ро╡рпБ роЪро░ро┐рокро╛ро░рпНроХрпНроХ (5MB ро╡ро░роорпНрокрпБ)
                if (file.size > 5 * 1024 * 1024) {
                    alert(`роХрпЛрокрпНрокрпБ ${file.name} рооро┐роХрокрпН рокрпЖро░ро┐ропродрпБ (роЕродро┐роХрокроЯрпНроЪроорпН: 5MB)`);
                    continue;
                }
                
                // FileReader роорпВро▓роорпН роХрпЛрокрпНрокрпИрокрпН рокроЯро┐роХрпНроХро╡рпБроорпН
                const reader = new FileReader();
                reader.onload = function(e) {
                    const fileData = {
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        data: e.target.result,
                        lastModified: file.lastModified
                    };
                    attachments.push(fileData);
                    saveAttachments();
                    renderAttachments();
                    updateWhatsAppMessage();
                };
                reader.readAsDataURL(file);
            }
            
            // роЙро│рпНро│рпАроЯрпНроЯрпИ роорпАроЯрпНроЯроорпИроХрпНроХро╡рпБроорпН
            event.target.value = '';
        }
        
        // роЪрпЗро╡рпИ роиро┐ро▓рпИ роХрпЛрокрпНрокрпБ рокродро┐ро╡рпЗро▒рпНро▒родрпНродрпИ роХрпИропро╛ро│рпБродро▓рпН
        function handleStatusFileUpload(event) {
            const files = event.target.files;
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                
                // роХрпЛрокрпНрокрпБ роЕро│ро╡рпБ роЪро░ро┐рокро╛ро░рпНроХрпНроХ (5MB ро╡ро░роорпНрокрпБ)
                if (file.size > 5 * 1024 * 1024) {
                    alert(`роХрпЛрокрпНрокрпБ ${file.name} рооро┐роХрокрпН рокрпЖро░ро┐ропродрпБ (роЕродро┐роХрокроЯрпНроЪроорпН: 5MB)`);
                    continue;
                }
                
                // FileReader роорпВро▓роорпН роХрпЛрокрпНрокрпИрокрпН рокроЯро┐роХрпНроХро╡рпБроорпН
                const reader = new FileReader();
                reader.onload = function(e) {
                    const fileData = {
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        data: e.target.result,
                        lastModified: file.lastModified
                    };
                    statusAttachments.push(fileData);
                    saveStatusAttachments();
                    renderStatusAttachments();
                    updateStatusMessage();
                };
                reader.readAsDataURL(file);
            }
            
            // роЙро│рпНро│рпАроЯрпНроЯрпИ роорпАроЯрпНроЯроорпИроХрпНроХро╡рпБроорпН
            event.target.value = '';
        }
        
        // роЗро┤рпБродрпНродрпБ ро╡ро┐роЯрпБродро▓рпН роЪрпЖропро▓рпНрокро╛роЯрпБ
        function initializeDragAndDrop() {
            const uploadAreas = document.querySelectorAll('.upload-area');
            
            uploadAreas.forEach(area => {
                area.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.borderColor = 'white';
                    this.style.background = 'rgba(255,255,255,0.1)';
                });
                
                area.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    this.style.borderColor = 'rgba(255,255,255,0.3)';
                    this.style.background = 'transparent';
                });
                
                area.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.style.borderColor = 'rgba(255,255,255,0.3)';
                    this.style.background = 'transparent';
                    
                    const files = e.dataTransfer.files;
                    const fileInput = this.parentElement.querySelector('.file-input');
                    
                    // Create a fake event to trigger the file input handler
                    const event = new Event('change', { bubbles: true });
                    Object.defineProperty(event, 'target', { value: { files: files } });
                    
                    if (fileInput.id === 'fileInput') {
                        handleFileUpload(event);
                    } else if (fileInput.id === 'statusFileInput') {
                        handleStatusFileUpload(event);
                    }
                });
            });
        }
        
        // роХрпНро│ро╡рпБроЯрпН роЗрогрпИрокрпНрокрпБ роЪрпЗро░рпНроХрпНроХ
        function addCloudLink(type) {
            // Set default values based on type
            let defaultName = '';
            let defaultUrl = '';
            
            switch(type) {
                case 'google-drive':
                    defaultName = 'Google Drive роЗрогрпИрокрпНрокрпБ';
                    defaultUrl = 'https://drive.google.com/';
                    break;
                case 'dropbox':
                    defaultName = 'Dropbox роЗрогрпИрокрпНрокрпБ';
                    defaultUrl = 'https://www.dropbox.com/';
                    break;
                case 'onedrive':
                    defaultName = 'OneDrive роЗрогрпИрокрпНрокрпБ';
                    defaultUrl = 'https://onedrive.live.com/';
                    break;
            }
            
            document.getElementById('cloudLinkName').value = defaultName;
            document.getElementById('cloudLinkUrl').value = defaultUrl;
            document.getElementById('cloudLinkType').value = type;
            document.getElementById('cloudLinkModal').classList.add('active');
        }
        
        function closeCloudLinkModal() {
            document.getElementById('cloudLinkModal').classList.remove('active');
        }
        
        function addCloudLinkFromModal() {
            const name = document.getElementById('cloudLinkName').value.trim();
            const url = document.getElementById('cloudLinkUrl').value.trim();
            const type = document.getElementById('cloudLinkType').value;
            
            if (!name || !url) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН URL роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            // URL роЪро░ро┐рокро╛ро░рпНроХрпНроХ
            try {
                new URL(url);
            } catch (e) {
                alert('роЪро░ро┐ропро╛рой URL роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            const cloudLink = {
                name: name,
                url: url,
                type: type,
                date: new Date().toISOString()
            };
            
            cloudLinks.push(cloudLink);
            saveCloudLinks();
            renderAttachments();
            closeCloudLinkModal();
            alert('роХрпНро│ро╡рпБроЯрпН роЗрогрпИрокрпНрокрпБ роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
        }
        
        // роЗрогрпИрокрпНрокрпИ роирпАроХрпНроХрпБродро▓рпН
        function removeAttachment(index) {
            if (confirm('роЗроирпНрод роЖро╡рогродрпНродрпИ роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                attachments.splice(index, 1);
                saveAttachments();
                renderAttachments();
                updateWhatsAppMessage();
            }
        }
        
        function removeStatusAttachment(index) {
            if (confirm('роЗроирпНрод роЖро╡рогродрпНродрпИ роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                statusAttachments.splice(index, 1);
                saveStatusAttachments();
                renderStatusAttachments();
                updateStatusMessage();
            }
        }
        
        function removeCloudLink(index) {
            if (confirm('роЗроирпНрод роХрпНро│ро╡рпБроЯрпН роЗрогрпИрокрпНрокрпИ роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                cloudLinks.splice(index, 1);
                saveCloudLinks();
                renderAttachments();
            }
        }
        
        // роЖро╡рогродрпНродрпИ роорпБройрпНройрпЛроЯрпНроЯрооро┐роЯрпБродро▓рпН
        function previewAttachment(index) {
            const file = attachments[index];
            if (file.type.includes('image')) {
                // рокроЯродрпНродрпИ рокрпБродро┐роп роЪро╛ро│ро░родрпНродро┐ро▓рпН роХро╛роЯрпНроЯрпБ
                const imgWindow = window.open('');
                imgWindow.document.write(`<img src="${file.data}" style="max-width: 100%; height: auto;">`);
            } else if (file.type.includes('pdf')) {
                // PDF роХро╛роЯрпНроЯрпБ
                const pdfWindow = window.open('');
                pdfWindow.document.write(`
                    <iframe src="${file.data}" width="100%" height="100%" style="border: none;"></iframe>
                    <p style="padding: 10px;"><a href="${file.data}" download="${file.name}">рокродро┐ро╡ро┐ро▒роХрпНроХрпБ</a></p>
                `);
            } else {
                // рооро▒рпНро▒ роХрпЛрокрпНрокрпБроХро│рпН
                alert(`роХрпЛрокрпНрокрпБ: ${file.name}\nроЕро│ро╡рпБ: ${formatFileSize(file.size)}\nро╡роХрпИ: ${file.type}\n\nроЗроирпНрод роХрпЛрокрпНрокрпБ ро╡роХрпИ рокро╛ро░рпНроХрпНроХ роорпБроЯро┐ропро╛родрпБ. рокродро┐ро╡ро┐ро▒роХрпНроХро╡рпБроорпН.`);
            }
        }
        
        function previewStatusAttachment(index) {
            const file = statusAttachments[index];
            previewAttachment(index); // Use same function
        }
        
        // роЗрогрпИрокрпНрокрпИ роироХро▓рпЖроЯрпБроХрпНроХ
        function copyLink(url) {
            navigator.clipboard.writeText(url).then(() => {
                alert('роЗрогрпИрокрпНрокрпБ роироХро▓рпЖроЯрпБроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }
        
        // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпИ роЪрпЗрооро┐роХрпНроХ
        function saveAttachments() {
            // Only save metadata, not the actual file data (to avoid localStorage limits)
            const attachmentsMetadata = attachments.map(att => ({
                name: att.name,
                type: att.type,
                size: att.size,
                lastModified: att.lastModified
            }));
            localStorage.setItem('dhassAttachments', JSON.stringify(attachmentsMetadata));
        }
        
        function saveStatusAttachments() {
            const attachmentsMetadata = statusAttachments.map(att => ({
                name: att.name,
                type: att.type,
                size: att.size,
                lastModified: att.lastModified
            }));
            localStorage.setItem('dhassStatusAttachments', JSON.stringify(attachmentsMetadata));
        }
        
        function saveCloudLinks() {
            localStorage.setItem('dhassCloudLinks', JSON.stringify(cloudLinks));
        }
        
        // роорпАродроорпБро│рпНро│ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпН...
        
        function renderServices() {
            const grid = document.getElementById('serviceButtonsGrid'); if (!grid) return; grid.innerHTML = '';
            let filteredServices = [...predefinedServices, ...customServices];
            if (activeFilter !== 'all') {
                if (activeFilter === 'custom') { filteredServices = filteredServices.filter(s => !s.isPredefined); }
                else { filteredServices = filteredServices.filter(s => s.category === activeFilter); }
            }
            const searchTerm = document.getElementById('serviceSearch').value.toLowerCase();
            if (searchTerm) { filteredServices = filteredServices.filter(s => s.name.toLowerCase().includes(searchTerm) || s.category.toLowerCase().includes(searchTerm) || s.description.toLowerCase().includes(searchTerm)); }
            filteredServices.forEach(service => {
                const button = document.createElement('div');
                button.className = `service-btn ${service.isPredefined ? '' : 'custom-service'}`;
                button.innerHTML = `<div class="service-icon"><i class="${service.icon}"></i></div><div class="service-btn-name">${service.name}</div><div class="service-btn-category">${service.category}</div><div class="service-btn-price">тВ╣${service.price.toFixed(2)}</div>${!service.isPredefined ? `<button class="delete-service-btn" onclick="deleteCustomService(${service.id})"><i class="fas fa-times"></i></button>` : ''}`;
                button.addEventListener('click', function(e) { e.stopPropagation(); selectService(service); });
                grid.appendChild(button);
            });
            updateServiceCount();
        }
        
        function filterServices(category) {
            activeFilter = category;
            document.querySelectorAll('.filter-btn').forEach(btn => { btn.classList.remove('active'); if (btn.textContent.includes(category) || (category === 'all' && btn.textContent.includes('роЕройрпИродрпНродрпБроорпН'))) { btn.classList.add('active'); } });
            renderServices();
        }
        
        function updateServiceCount() {
            document.getElementById('totalServicesCount').textContent = predefinedServices.length + customServices.length;
            document.getElementById('customServicesCount').textContent = customServices.length;
            document.getElementById('predefinedServicesCount').textContent = predefinedServices.length;
        }
        
        function selectService(service) {
            document.querySelectorAll('.service-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            currentService = { ...service, customDocuments: currentService.id === service.id ? (currentService.customDocuments || [...service.documents]) : [...service.documents] };
            updateDisplay(); updateDocumentsList(); updateWhatsAppMessage(); updateEmailMessage(); saveToLocalStorage();
        }
        
        function updateDisplay() {
            document.getElementById('serviceNameDisplay').textContent = currentService.name;
            document.getElementById('serviceCategoryDisplay').textContent = currentService.category;
            document.getElementById('servicePriceDisplay').textContent = `тВ╣${currentService.price.toFixed(2)}`;
            document.getElementById('serviceDescriptionDisplay').textContent = currentService.description;
        }
        
        // WhatsApp роЪрпЖропрпНродро┐ропрпИ рокрпБродрпБрокрпНрокро┐роХрпНроХ (роЗрогрпИрокрпНрокрпБроХро│рпБроЯройрпН)
        function updateWhatsAppMessage() {
            const customerName = document.getElementById('customerName').value || 'ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН';
            let message = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН\n\nро╡рогроХрпНроХроорпН ${customerName}!\n\nроЪрпЗро╡рпИ: ${currentService.name}\nроЪрпЗро╡рпИ ро╡роХрпИ: ${currentService.category}\nроХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}\n\n`;
            if (currentService.description) { message += `ро╡ро┐ро│роХрпНроХроорпН: ${currentService.description}\n\n`; }
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            if (allDocuments.length > 0) {
                message += `родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:\n`; allDocuments.forEach((doc, index) => { message += `тЬУ ${doc}\n`; }); message += `\n`;
            }
            
            // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН
            if (attachments.length > 0 || cloudLinks.length > 0) {
                message += `роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ роЖро╡рогроЩрпНроХро│рпН:\n`;
                cloudLinks.forEach((link, index) => {
                    message += `ЁЯФЧ ${link.name}: ${link.url}\n`;
                });
                attachments.forEach((file, index) => {
                    message += `ЁЯУО ${file.name} (${formatFileSize(file.size)})\n`;
                });
                message += `\n`;
            }
            
            message += `родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│:\nЁЯУЮ 8870232332\nЁЯУЮ 9843232324 (WhatsApp)\nЁЯУН родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1\n\nроиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!`;
            document.getElementById('messagePreview').textContent = message;
        }
        
        function testWhatsAppMessage() {
            const customerName = document.getElementById('customerName').value || 'ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН';
            let message = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН\n\nро╡рогроХрпНроХроорпН ${customerName}!\n\nроЪрпЗро╡рпИ: ${currentService.name}\nроЪрпЗро╡рпИ ро╡роХрпИ: ${currentService.category}\nроХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}\n\n`;
            if (currentService.description) { message += `ро╡ро┐ро│роХрпНроХроорпН: ${currentService.description}\n\n`; }
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            if (allDocuments.length > 0) {
                message += `родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:\n`; allDocuments.forEach((doc, index) => { message += `тЬУ ${doc}\n`; }); message += `\n`;
            }
            
            // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН
            if (attachments.length > 0 || cloudLinks.length > 0) {
                message += `роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ роЖро╡рогроЩрпНроХро│рпН:\n`;
                cloudLinks.forEach((link, index) => {
                    message += `ЁЯФЧ ${link.name}: ${link.url}\n`;
                });
                attachments.forEach((file, index) => {
                    message += `ЁЯУО ${file.name} (${formatFileSize(file.size)})\n`;
                });
                message += `\n`;
            }
            
            message += `родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│:\nЁЯУЮ 8870232332\nЁЯУЮ 9843232324 (WhatsApp)\nЁЯУН родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1\n\nроиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!`;
            alert('WhatsApp роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:\n\n' + message);
        }
        
        function sendWhatsAppMessage() {
            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            if (!customerName || !customerPhone) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН'); return; }
            const phoneRegex = /^[6-9]\d{9}$/; const cleanPhone = customerPhone.replace(/\D/g, '');
            if (!phoneRegex.test(cleanPhone)) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛рой роЗроирпНродро┐роп родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН (10 роЗро▓роХрпНроХроЩрпНроХро│рпН)\n\nроО.роХро╛: 9843232324'); return; }
            let message = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН%0A%0Aро╡рогроХрпНроХроорпН ${encodeURIComponent(customerName)}!%0A%0AроЪрпЗро╡рпИ: ${encodeURIComponent(currentService.name)}%0AроЪрпЗро╡рпИ ро╡роХрпИ: ${encodeURIComponent(currentService.category)}%0AроХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}%0A%0A`;
            if (currentService.description) { message += `ро╡ро┐ро│роХрпНроХроорпН: ${encodeURIComponent(currentService.description)}%0A%0A`; }
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            if (allDocuments.length > 0) { message += `родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:%0A`; allDocuments.forEach((doc, index) => { message += `тЬУ ${encodeURIComponent(doc)}%0A`; }); message += `%0A`; }
            
            // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН
            if (attachments.length > 0 || cloudLinks.length > 0) {
                message += `роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ роЖро╡рогроЩрпНроХро│рпН:%0A`;
                cloudLinks.forEach((link, index) => {
                    message += `ЁЯФЧ ${encodeURIComponent(link.name)}: ${encodeURIComponent(link.url)}%0A`;
                });
                attachments.forEach((file, index) => {
                    message += `ЁЯУО ${encodeURIComponent(file.name)} (${formatFileSize(file.size)})%0A`;
                });
                message += `%0A`;
            }
            
            message += `родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│:%0AЁЯУЮ 8870232332%0AЁЯУЮ 9843232324 (WhatsApp)%0AЁЯУН родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1%0A%0AроиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!`;
            const whatsappUrl = `https://wa.me/91${cleanPhone}?text=${message}`;
            window.open(whatsappUrl, '_blank'); saveCustomerInfo(customerName, cleanPhone);
            alert(`WhatsApp роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯродрпБ!\n\n${customerName} (${cleanPhone})`);
        }
        
        // роЪрпЗро╡рпИ роиро┐ро▓рпИ роЪрпЖропрпНродро┐ропрпИ рокрпБродрпБрокрпНрокро┐роХрпНроХ (роЗрогрпИрокрпНрокрпБроХро│рпБроЯройрпН)
        function updateStatusMessage() {
            const customerName = document.getElementById('statusCustomerName').value || '[рокрпЖропро░рпН]';
            const service = document.getElementById('statusService').value || '[роЪрпЗро╡рпИ]';
            const refNumber = document.getElementById('statusRefNumber').value || '[роХрпБро▒ро┐рокрпНрокрпБ роОрогрпН]';
            const note = document.getElementById('statusNote').value || '';
            const statusType = document.getElementById('statusType').value;
            
            // Update active status buttons
            document.querySelectorAll('.status-option-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            let message = '';
            const currentTime = new Date().toLocaleTimeString('ta-IN', {hour: '2-digit', minute:'2-digit'});
            const currentDate = new Date().toLocaleDateString('ta-IN', {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'});
            
            switch(statusType) {
                case 'welcome':
                    document.querySelector('.status-option-btn:nth-child(1)').classList.add('active');
                    message = `ро╡рогроХрпНроХроорпН ${customerName}! ЁЯСЛ\n\n`;
                    message += `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▒рпНроХрпБ роЙроЩрпНроХро│рпИ ро╡ро░ро╡рпЗро▒рпНроХро┐ро▒рпЛроорпН! ЁЯШК\n\n`;
                    message += `роирпАроЩрпНроХро│рпН роХрпЛро░ро┐роп ${service} роЪрпЗро╡рпИроХрпНроХрпБ роиро╛роЩрпНроХро│рпН роЙродро╡ роороХро┐ро┤рпНроЪрпНроЪро┐ропроЯрпИроХро┐ро▒рпЛроорпН.\n\n`;
                    message += `роОроЩрпНроХро│рпН роЪрпЗро╡рпИроХро│рпН:\nтЬУ роЕро░роЪрпБ роЪрпЗро╡рпИроХро│рпН\nтЬУ роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ\nтЬУ рокрпБроХрпИрокрпНрокроЯроорпН & роЕроЪрпНроЪро┐роЯрпБродро▓рпН\nтЬУ рокро╛ро╕рпНрокрпЛро░рпНроЯрпН & ро╡ро┐роЪро╛\n\n`;
                    // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпН
                    if (statusAttachments.length > 0) {
                        message += `роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ роЖро╡рогроЩрпНроХро│рпН:\n`;
                        statusAttachments.forEach((file, index) => {
                            message += `ЁЯУО ${file.name} (${formatFileSize(file.size)})\n`;
                        });
                        message += `\n`;
                    }
                    message += `родрпКроЯро░рпНрокрпБ роОрогрпНроХро│рпН:\nЁЯУЮ 88 70 23 23 32\nЁЯУЮ 98 43 23 23 24\n\n`;
                    message += `роиройрпНро▒ро┐!\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН\nродрпВродрпНродрпБроХрпНроХрпБроЯро┐-1`;
                    break;
                    
                case 'received':
                    document.querySelector('.status-option-btn:nth-child(2)').classList.add('active');
                    message = `ро╡рогроХрпНроХроорпН ${customerName}! тЬЕ\n\n`;
                    message += `роЙроЩрпНроХро│рпН ${service} роХрпЛро░ро┐роХрпНроХрпИ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ рокрпЖро▒рокрпНрокроЯрпНроЯродрпБ.`;
                    if (refNumber && refNumber !== '[роХрпБро▒ро┐рокрпНрокрпБ роОрогрпН]') message += `\n\nроХрпБро▒ро┐рокрпНрокрпБ роОрогрпН: ${refNumber}`;
                    if (note) message += `\n\nроХрпБро▒ро┐рокрпНрокрпБ: ${note}`;
                    // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпН
                    if (statusAttachments.length > 0) {
                        message += `\n\nроЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ роЖро╡рогроЩрпНроХро│рпН:\n`;
                        statusAttachments.forEach((file, index) => {
                            message += `ЁЯУО ${file.name} (${formatFileSize(file.size)})\n`;
                        });
                    }
                    message += `\n\nроЙроЩрпНроХро│рпН роХрпЛро░ро┐роХрпНроХрпИ ро╡ро┐ро░рпИро╡ро┐ро▓рпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН.\n\n`;
                    message += `роиройрпНро▒ро┐!\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН\nродрпВродрпНродрпБроХрпНроХрпБроЯро┐-1`;
                    break;
                    
                default:
                    document.querySelector('.status-option-btn:nth-child(2)').classList.add('active');
                    message = `ро╡рогроХрпНроХроорпН ${customerName}! тЬЕ\n\n`;
                    message += `роЙроЩрпНроХро│рпН ${service} роХрпЛро░ро┐роХрпНроХрпИ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ рокрпЖро▒рокрпНрокроЯрпНроЯродрпБ.`;
                    if (refNumber && refNumber !== '[роХрпБро▒ро┐рокрпНрокрпБ роОрогрпН]') message += `\n\nроХрпБро▒ро┐рокрпНрокрпБ роОрогрпН: ${refNumber}`;
                    if (note) message += `\n\nроХрпБро▒ро┐рокрпНрокрпБ: ${note}`;
                    // роЖро╡рог роЗрогрпИрокрпНрокрпБроХро│рпН
                    if (statusAttachments.length > 0) {
                        message += `\n\nроЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ роЖро╡рогроЩрпНроХро│рпН:\n`;
                        statusAttachments.forEach((file, index) => {
                            message += `ЁЯУО ${file.name} (${formatFileSize(file.size)})\n`;
                        });
                    }
                    message += `\n\nроЙроЩрпНроХро│рпН роХрпЛро░ро┐роХрпНроХрпИ ро╡ро┐ро░рпИро╡ро┐ро▓рпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН.\n\n`;
                    message += `роиройрпНро▒ро┐!\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН\nродрпВродрпНродрпБроХрпНроХрпБроЯро┐-1`;
            }
            
            document.getElementById('statusMessagePreview').textContent = message;
        }
        
        function setStatusType(type) {
            document.getElementById('statusType').value = type;
            updateStatusMessage();
        }

        function testStatusMessage() {
            const customerName = document.getElementById('statusCustomerName').value || '[рокрпЖропро░рпН]';
            const customerPhone = document.getElementById('statusCustomerPhone').value;
            
            if (!customerName || !customerPhone) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            const phoneRegex = /^[6-9]\d{9}$/;
            const cleanPhone = customerPhone.replace(/\D/g, '');
            
            if (!phoneRegex.test(cleanPhone)) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛рой роЗроирпНродро┐роп родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН (10 роЗро▓роХрпНроХроЩрпНроХро│рпН)');
                return;
            }
            
            const message = document.getElementById('statusMessagePreview').textContent;
            alert('роиро┐ро▓рпИ роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:\n\n' + message);
        }

        function sendStatusMessage() {
            const customerName = document.getElementById('statusCustomerName').value;
            const customerPhone = document.getElementById('statusCustomerPhone').value;
            const service = document.getElementById('statusService').value;
            
            if (!customerName || !customerPhone || !service) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН, родрпКро▓рпИрокрпЗроЪро┐ роОрогрпН рооро▒рпНро▒рпБроорпН роЪрпЗро╡рпИ ро╡ро┐рокро░родрпНродрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            const phoneRegex = /^[6-9]\d{9}$/;
            const cleanPhone = customerPhone.replace(/\D/g, '');
            
            if (!phoneRegex.test(cleanPhone)) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛рой роЗроирпНродро┐роп родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН (10 роЗро▓роХрпНроХроЩрпНроХро│рпН)');
                return;
            }
            
            const message = document.getElementById('statusMessagePreview').textContent;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/91${cleanPhone}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
            
            alert(`роЪрпЗро╡рпИ роиро┐ро▓рпИ роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯродрпБ!\n\n${customerName} (${cleanPhone})\nроЪрпЗро╡рпИ: ${service}`);
        }
        
        // роорпАродроорпБро│рпНро│ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпН...
        function openAddServiceModal() {
            document.getElementById('addServiceModal').classList.add('active');
        }
        
        function closeAddServiceModal() {
            document.getElementById('addServiceModal').classList.remove('active');
        }
        
        function saveNewService() {
            const name = document.getElementById('newServiceName').value.trim();
            const category = document.getElementById('newServiceCategory').value;
            const price = parseFloat(document.getElementById('newServicePrice').value);
            const description = document.getElementById('newServiceDescription').value.trim();
            const documents = document.getElementById('newServiceDocuments').value.split('\n').filter(d => d.trim());
            const icon = document.getElementById('newServiceIcon').value;
            
            if (!name || !category || isNaN(price)) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЗро╡рпИропро┐ройрпН рокрпЖропро░рпН, ро╡роХрпИ рооро▒рпНро▒рпБроорпН роХроЯрпНроЯрогродрпНродрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            const newId = Date.now();
            const newService = {
                id: newId,
                name: name,
                category: category,
                price: price,
                description: description || `${name} роЪрпЗро╡рпИ`,
                icon: icon,
                documents: documents.length > 0 ? documents : ['роОроирпНрод роЖро╡рогроорпБроорпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ'],
                isPredefined: false
            };
            
            customServices.push(newService);
            saveCustomServicesToStorage();
            renderServices();
            closeAddServiceModal();
            
            // Clear form
            document.getElementById('newServiceName').value = '';
            document.getElementById('newServicePrice').value = '';
            document.getElementById('newServiceDescription').value = '';
            document.getElementById('newServiceDocuments').value = '';
            
            alert('рокрпБродро┐роп роЪрпЗро╡рпИ роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
        }
        
        function deleteCustomService(id) {
            if (confirm('роЗроирпНрод роЪрпЗро╡рпИропрпИ роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                customServices = customServices.filter(s => s.id !== id);
                saveCustomServicesToStorage();
                renderServices();
                
                if (currentService.id === id) {
                    currentService = { id: 0, name: "роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", category: "роЪрпЗро╡рпИ ро╡роХрпИ", price: 0, description: "роорпЗро▓рпЗ роЙро│рпНро│ рокроЯрпНроЯройрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", icon: "fas fa-question-circle", documents: ["роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН"], customDocuments: [], isPredefined: false };
                    updateDisplay();
                    updateDocumentsList();
                    updateWhatsAppMessage();
                    updateEmailMessage();
                }
                
                alert('роЪрпЗро╡рпИ роирпАроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
            }
        }
        
        function openEditServiceModal() {
            if (currentService.id === 0) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роорпБродро▓ро┐ро▓рпН роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН');
                return;
            }
            
            document.getElementById('editServiceName').value = currentService.name;
            document.getElementById('editServiceCategory').value = currentService.category;
            document.getElementById('editServicePrice').value = currentService.price;
            document.getElementById('editServiceDescription').value = currentService.description;
            document.getElementById('editServiceDocuments').value = (currentService.customDocuments || currentService.documents || []).join('\n');
            document.getElementById('editServiceIcon').value = currentService.icon;
            
            document.getElementById('editServiceModal').classList.add('active');
        }
        
        function closeEditServiceModal() {
            document.getElementById('editServiceModal').classList.remove('active');
        }
        
        function saveEditedService() {
            const name = document.getElementById('editServiceName').value.trim();
            const category = document.getElementById('editServiceCategory').value;
            const price = parseFloat(document.getElementById('editServicePrice').value);
            const description = document.getElementById('editServiceDescription').value.trim();
            const documents = document.getElementById('editServiceDocuments').value.split('\n').filter(d => d.trim());
            const icon = document.getElementById('editServiceIcon').value;
            
            if (!name || !category || isNaN(price)) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЗро╡рпИропро┐ройрпН рокрпЖропро░рпН, ро╡роХрпИ рооро▒рпНро▒рпБроорпН роХроЯрпНроЯрогродрпНродрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            // Update current service
            currentService.name = name;
            currentService.category = category;
            currentService.price = price;
            currentService.description = description || `${name} роЪрпЗро╡рпИ`;
            currentService.icon = icon;
            currentService.customDocuments = documents.length > 0 ? documents : ['роОроирпНрод роЖро╡рогроорпБроорпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ'];
            
            // Update in services array
            if (currentService.isPredefined) {
                const index = predefinedServices.findIndex(s => s.id === currentService.id);
                if (index !== -1) {
                    predefinedServices[index] = { ...predefinedServices[index], ...currentService };
                    localStorage.setItem('dhassPredefinedServices', JSON.stringify(predefinedServices));
                }
            } else {
                const index = customServices.findIndex(s => s.id === currentService.id);
                if (index !== -1) {
                    customServices[index] = { ...customServices[index], ...currentService };
                    saveCustomServicesToStorage();
                }
            }
            
            updateDisplay();
            updateDocumentsList();
            updateWhatsAppMessage();
            updateEmailMessage();
            renderServices();
            closeEditServiceModal();
            
            alert('роЪрпЗро╡рпИ родро┐ро░рпБродрпНродрокрпНрокроЯрпНроЯродрпБ!');
        }
        
        function openAddDocumentModal() {
            document.getElementById('addDocumentModal').classList.add('active');
        }
        
        function closeAddDocumentModal() {
            document.getElementById('addDocumentModal').classList.remove('active');
            document.getElementById('newDocument').value = '';
        }
        
        function addDocument() {
            const newDoc = document.getElementById('newDocument').value.trim();
            if (!newDoc) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЖро╡рогродрпНродро┐ройрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            if (!currentService.customDocuments) {
                currentService.customDocuments = [...currentService.documents];
            }
            
            currentService.customDocuments.push(newDoc);
            updateDocumentsList();
            closeAddDocumentModal();
            alert('рокрпБродро┐роп роЖро╡рогроорпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
        }
        
        function openEditDocumentModal() {
            if (currentService.id === 0) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роорпБродро▓ро┐ро▓рпН роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН');
                return;
            }
            
            const allDocuments = currentService.customDocuments || currentService.documents || [];
            let docText = '';
            allDocuments.forEach(doc => {
                docText += doc + '\n';
            });
            
            const modalContent = `
                <div class="modal-header">роЖро╡рогроЩрпНроХро│рпИ родро┐ро░рпБродрпНродрпБ</div>
                <textarea id="editDocumentsText" class="modal-textarea" placeholder="роТро╡рпНро╡рпКро░рпБ ро╡ро░ро┐ропро┐ро▓рпБроорпН роТро░рпБ роЖро╡рогроорпН" style="min-height: 200px;">${docText}</textarea>
                <div class="modal-buttons">
                    <button type="button" class="btn-add" onclick="saveEditedDocuments()">роЪрпЗрооро┐</button>
                    <button type="button" class="btn-cancel" onclick="closeEditDocumentModal()">ро░родрпНродрпБ</button>
                </div>
            `;
            
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.id = 'editDocumentModal';
            modal.innerHTML = `
                <div class="modal-content">
                    ${modalContent}
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function closeEditDocumentModal() {
            const modal = document.getElementById('editDocumentModal');
            if (modal) {
                modal.remove();
            }
        }
        
        function saveEditedDocuments() {
            const docText = document.getElementById('editDocumentsText').value;
            const documents = docText.split('\n').filter(d => d.trim());
            
            currentService.customDocuments = documents.length > 0 ? documents : ['роОроирпНрод роЖро╡рогроорпБроорпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ'];
            updateDocumentsList();
            closeEditDocumentModal();
            alert('роЖро╡рогроЩрпНроХро│рпН родро┐ро░рпБродрпНродрокрпНрокроЯрпНроЯрой!');
        }
        
        function updateDocumentsList() {
            const documentsList = document.getElementById('documentsList');
            documentsList.innerHTML = '';
            
            const allDocuments = currentService.customDocuments || currentService.documents || [];
            
            if (allDocuments.length === 0) {
                documentsList.innerHTML = '<li class="document-item"><i class="fas fa-check-circle"></i><span>роОроирпНрод роЖро╡рогроорпБроорпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ</span></li>';
                return;
            }
            
            allDocuments.forEach(doc => {
                const li = document.createElement('li');
                li.className = 'document-item';
                li.innerHTML = `<i class="fas fa-check-circle"></i><span>${doc}</span>`;
                documentsList.appendChild(li);
            });
        }
        
        // роиройрпНро▒ро┐ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ роЪрпЖропрпНродро┐роХро│рпН
        function updateThankYouMessage() {
            const customerName = document.getElementById('thankYouCustomerName').value || '[рокрпЖропро░рпН]';
            const services = document.getElementById('thankYouServices').value || '[роЪрпЗро╡рпИроХро│рпН]';
            const refNumbers = document.getElementById('thankYouRefNumbers').value || '[роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН]';
            
            let message = `ро╡рогроХрпНроХроорпН ${customerName}!\n\n`;
            message += `роОроЩрпНроХро│рпН родро╛ро╕рпН рокрпКродрпБроЪрпЗро╡рпИ роорпИропродрпНродрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНродрпБ, ро╡ро░рпБроХрпИ рокрпБро░ро┐роирпНродроорпИроХрпНроХрпБ, рооро┐роХро╡рпБроорпН роиройрпНро▒ро┐.\n\n`;
            
            if (services !== '[роЪрпЗро╡рпИроХро│рпН]') {
                message += `роЪрпЗро╡рпИроХро│рпН: ${services}\n`;
            }
            
            if (refNumbers !== '[роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН]') {
                message += `роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН: ${refNumbers}\n`;
            }
            
            message += `\nроЗроирпНрод роиро╛ро│рпН роЗройро┐родро╛роХ роЕроорпИроп ро╡ро╛ро┤рпНродрпНродрпБроХро┐ро▒рпЛроорпН.\n\n`;
            message += `роиройрпНро▒ро┐!\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН\nродрпВродрпНродрпБроХрпНроХрпБроЯро┐-1`;
            
            document.getElementById('thankYouMessagePreview').textContent = message;
        }
        
        function testThankYouMessage() {
            const message = document.getElementById('thankYouMessagePreview').textContent;
            alert('роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:\n\n' + message);
        }
        
        function sendThankYouMessage() {
            const customerName = document.getElementById('thankYouCustomerName').value;
            const customerPhone = document.getElementById('thankYouCustomerPhone').value;
            
            if (!customerName || !customerPhone) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            const phoneRegex = /^[6-9]\d{9}$/;
            const cleanPhone = customerPhone.replace(/\D/g, '');
            
            if (!phoneRegex.test(cleanPhone)) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛рой роЗроирпНродро┐роп родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН (10 роЗро▓роХрпНроХроЩрпНроХро│рпН)');
                return;
            }
            
            const message = document.getElementById('thankYouMessagePreview').textContent;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/91${cleanPhone}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
            
            alert(`роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯродрпБ!\n\n${customerName} (${cleanPhone})`);
        }
        
        function saveServiceInfo() {
            saveToLocalStorage();
            alert('роЕройрпИродрпНродрпБ родроХро╡ро▓рпНроХро│рпБроорпН роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯрой!');
        }
        
        function saveToLocalStorage() {
            localStorage.setItem('dhassCurrentService', JSON.stringify(currentService));
            localStorage.setItem('dhassCustomerName', document.getElementById('customerName').value);
            localStorage.setItem('dhassCustomerPhone', document.getElementById('customerPhone').value);
            localStorage.setItem('dhassEmailCustomerName', document.getElementById('emailCustomerName').value);
            localStorage.setItem('dhassEmailCustomerEmail', document.getElementById('emailCustomerEmail').value);
            localStorage.setItem('dhassThankYouCustomerName', document.getElementById('thankYouCustomerName').value);
            localStorage.setItem('dhassThankYouCustomerPhone', document.getElementById('thankYouCustomerPhone').value);
            localStorage.setItem('dhassThankYouServices', document.getElementById('thankYouServices').value);
            localStorage.setItem('dhassThankYouRefNumbers', document.getElementById('thankYouRefNumbers').value);
        }
        
        function loadSavedData() {
            const savedCurrentService = localStorage.getItem('dhassCurrentService');
            if (savedCurrentService) {
                try {
                    currentService = JSON.parse(savedCurrentService);
                    updateDisplay();
                    updateDocumentsList();
                } catch (e) {}
            }
            
            const savedCustomerName = localStorage.getItem('dhassCustomerName');
            if (savedCustomerName) document.getElementById('customerName').value = savedCustomerName;
            
            const savedCustomerPhone = localStorage.getItem('dhassCustomerPhone');
            if (savedCustomerPhone) document.getElementById('customerPhone').value = savedCustomerPhone;
            
            const savedEmailCustomerName = localStorage.getItem('dhassEmailCustomerName');
            if (savedEmailCustomerName) document.getElementById('emailCustomerName').value = savedEmailCustomerName;
            
            const savedEmailCustomerEmail = localStorage.getItem('dhassEmailCustomerEmail');
            if (savedEmailCustomerEmail) document.getElementById('emailCustomerEmail').value = savedEmailCustomerEmail;
            
            const savedThankYouCustomerName = localStorage.getItem('dhassThankYouCustomerName');
            if (savedThankYouCustomerName) document.getElementById('thankYouCustomerName').value = savedThankYouCustomerName;
            
            const savedThankYouCustomerPhone = localStorage.getItem('dhassThankYouCustomerPhone');
            if (savedThankYouCustomerPhone) document.getElementById('thankYouCustomerPhone').value = savedThankYouCustomerPhone;
            
            const savedThankYouServices = localStorage.getItem('dhassThankYouServices');
            if (savedThankYouServices) document.getElementById('thankYouServices').value = savedThankYouServices;
            
            const savedThankYouRefNumbers = localStorage.getItem('dhassThankYouRefNumbers');
            if (savedThankYouRefNumbers) document.getElementById('thankYouRefNumbers').value = savedThankYouRefNumbers;
            
            updateWhatsAppMessage();
            updateEmailMessage();
            updateThankYouMessage();
        }
        
        function saveCustomerInfo(name, phone) {
            const customerInfo = {
                name: name,
                phone: phone,
                service: currentService.name,
                date: new Date().toISOString()
            };
            
            const savedCustomers = JSON.parse(localStorage.getItem('dhassCustomers') || '[]');
            savedCustomers.push(customerInfo);
            localStorage.setItem('dhassCustomers', JSON.stringify(savedCustomers));
        }
        
        function saveCustomServicesToStorage() {
            localStorage.setItem('dhassCustomServices', JSON.stringify(customServices));
        }
        
        function resetPredefinedServices() {
            if (confirm('ро░рпЖроЯро┐роорпЗроЯрпН роЪрпЗро╡рпИроХро│рпИ роЕроЪро▓рпН роиро┐ро▓рпИроХрпНроХрпБ роорпАроЯрпНроЯроорпИроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                predefinedServices = [...originalPredefinedServices];
                localStorage.setItem('dhassPredefinedServices', JSON.stringify(predefinedServices));
                renderServices();
                alert('ро░рпЖроЯро┐роорпЗроЯрпН роЪрпЗро╡рпИроХро│рпН роорпАроЯрпНроЯроорпИроХрпНроХрокрпНрокроЯрпНроЯрой!');
            }
        }
        
        function clearAll() {
            if (confirm('роЕройрпИродрпНродрпБ родроХро╡ро▓рпНроХро│рпИропрпБроорпН роЕро┤ро┐роХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                localStorage.removeItem('dhassCurrentService');
                localStorage.removeItem('dhassCustomerName');
                localStorage.removeItem('dhassCustomerPhone');
                localStorage.removeItem('dhassEmailCustomerName');
                localStorage.removeItem('dhassEmailCustomerEmail');
                localStorage.removeItem('dhassThankYouCustomerName');
                localStorage.removeItem('dhassThankYouCustomerPhone');
                localStorage.removeItem('dhassThankYouServices');
                localStorage.removeItem('dhassThankYouRefNumbers');
                
                document.getElementById('customerName').value = '';
                document.getElementById('customerPhone').value = '';
                document.getElementById('emailCustomerName').value = '';
                document.getElementById('emailCustomerEmail').value = '';
                document.getElementById('thankYouCustomerName').value = '';
                document.getElementById('thankYouCustomerPhone').value = '';
                document.getElementById('thankYouServices').value = '';
                document.getElementById('thankYouRefNumbers').value = '';
                
                currentService = { id: 0, name: "роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", category: "роЪрпЗро╡рпИ ро╡роХрпИ", price: 0, description: "роорпЗро▓рпЗ роЙро│рпНро│ рокроЯрпНроЯройрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", icon: "fas fa-question-circle", documents: ["роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН"], customDocuments: [], isPredefined: false };
                
                updateDisplay();
                updateDocumentsList();
                updateWhatsAppMessage();
                updateEmailMessage();
                updateThankYouMessage();
                
                alert('роЕройрпИродрпНродрпБ родроХро╡ро▓рпНроХро│рпБроорпН роЕро┤ро┐роХрпНроХрокрпНрокроЯрпНроЯрой!');
            }
        }
        
        function printPage() {
            window.print();
        }
    </script>
</body>
</html>